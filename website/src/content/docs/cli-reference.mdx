---
title: CLI Reference
description: Complete reference for gh-actions-lockfile CLI options and environment variables.
order: 4
---

import GitHubTokenNote from "../../components/docs/GitHubTokenNote.astro";

# CLI Reference

Complete reference for all CLI options and environment variables.

<GitHubTokenNote />

## Options

All commands accept the following options:

### `-w, --workflows <path>`

Path to the workflows directory.

**Default:** `.github/workflows`

```bash
node dist/cli.js generate --workflows ./my-workflows
```

### `-o, --output <path>`

Path to the lockfile.

**Default:** `.github/actions.lock.json`

```bash
node dist/cli.js generate --output ./lockfile.json
```

### `-t, --token <token>`

GitHub token for API authentication. Required for private repositories or to avoid rate limiting.

```bash
node dist/cli.js generate --token ghp_xxxxxxxxxxxx
```

## Generate Options

### `--require-sha`

Require all action references to be full 40-character commit SHAs. Fails if any workflow uses tags like `@v4` instead of full SHAs.

```bash
node dist/cli.js generate --require-sha
```

## Verify Options

### `--skip-sha`

Skip SHA resolution verification. This makes verification faster but less secure.

```bash
node dist/cli.js verify --skip-sha
```

### `--skip-integrity`

Skip integrity hash verification. This makes verification faster but less secure.

```bash
node dist/cli.js verify --skip-integrity
```

### `--skip-advisories`

Skip checking locked actions against the GitHub Advisory Database for known vulnerabilities. Advisory checking is enabled by default.

```bash
# Disable advisory checking
node dist/cli.js verify --skip-advisories
```

### `-c, --comment` / `--no-comment`

Post a PR comment when verification fails. Enabled by default.

```bash
# Disable PR comments
node dist/cli.js verify --no-comment
```

## Environment Variables

### `GITHUB_TOKEN`

Alternative to the `--token` option. If both are provided, the command-line option takes precedence.

```bash
export GITHUB_TOKEN=ghp_xxxxxxxxxxxx
node dist/cli.js generate
```

In GitHub Actions, this is automatically available:

```yaml
- uses: gjtorikian/gh-actions-lockfile@v1
  with:
    mode: generate
  env:
    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

## Running with Different Runtimes

### Node.js (Recommended)

The built CLI works with Node.js without additional dependencies:

```bash
node dist/cli.js <command> [options]
```

### Development Mode

You can also run directly from source with tsx:

```bash
npx tsx src/index.ts <command> [options]
```

## Examples

Generate a lockfile with custom paths:

```bash
node dist/cli.js generate \
  --workflows ./workflows \
  --output ./workflows/actions.lock.json
```

Verify in CI with explicit token:

```bash
GITHUB_TOKEN=${{ secrets.GITHUB_TOKEN }} node dist/cli.js verify
```

List dependencies for a specific lockfile:

```bash
node dist/cli.js list --output ./custom-lockfile.json
```
