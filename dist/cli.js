#!/usr/bin/env node
var Xi=Object.create;var Xs=Object.defineProperty;var Zi=Object.getOwnPropertyDescriptor;var er=Object.getOwnPropertyNames;var tr=Object.getPrototypeOf,sr=Object.prototype.hasOwnProperty;var nr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ir=(e,t,s,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of er(t))!sr.call(e,i)&&i!==s&&Xs(e,i,{get:()=>t[i],enumerable:!(n=Zi(t,i))||n.enumerable});return e};var rr=(e,t,s)=>(s=e!=null?Xi(tr(e)):{},ir(t||!e||!e.__esModule?Xs(s,"default",{value:e,enumerable:!0}):s,e));var Ti=nr((mh,Hs)=>{var Zt=process||{},Ni=Zt.argv||[],Xt=Zt.env||{},No=!(Xt.NO_COLOR||Ni.includes("--no-color"))&&(!!Xt.FORCE_COLOR||Ni.includes("--color")||Zt.platform==="win32"||(Zt.stdout||{}).isTTY&&Xt.TERM!=="dumb"||!!Xt.CI),Oo=(e,t,s=e)=>n=>{let i=""+n,r=i.indexOf(t,e.length);return~r?e+To(i,t,s,r)+t:e+i+t},To=(e,t,s,n)=>{let i="",r=0;do i+=e.substring(r,n)+s,r=n+t.length,n=e.indexOf(t,r);while(~n);return i+e.substring(r)},Oi=(e=No)=>{let t=e?Oo:()=>String;return{isColorSupported:e,reset:t("\x1B[0m","\x1B[0m"),bold:t("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:t("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:t("\x1B[3m","\x1B[23m"),underline:t("\x1B[4m","\x1B[24m"),inverse:t("\x1B[7m","\x1B[27m"),hidden:t("\x1B[8m","\x1B[28m"),strikethrough:t("\x1B[9m","\x1B[29m"),black:t("\x1B[30m","\x1B[39m"),red:t("\x1B[31m","\x1B[39m"),green:t("\x1B[32m","\x1B[39m"),yellow:t("\x1B[33m","\x1B[39m"),blue:t("\x1B[34m","\x1B[39m"),magenta:t("\x1B[35m","\x1B[39m"),cyan:t("\x1B[36m","\x1B[39m"),white:t("\x1B[37m","\x1B[39m"),gray:t("\x1B[90m","\x1B[39m"),bgBlack:t("\x1B[40m","\x1B[49m"),bgRed:t("\x1B[41m","\x1B[49m"),bgGreen:t("\x1B[42m","\x1B[49m"),bgYellow:t("\x1B[43m","\x1B[49m"),bgBlue:t("\x1B[44m","\x1B[49m"),bgMagenta:t("\x1B[45m","\x1B[49m"),bgCyan:t("\x1B[46m","\x1B[49m"),bgWhite:t("\x1B[47m","\x1B[49m"),blackBright:t("\x1B[90m","\x1B[39m"),redBright:t("\x1B[91m","\x1B[39m"),greenBright:t("\x1B[92m","\x1B[39m"),yellowBright:t("\x1B[93m","\x1B[39m"),blueBright:t("\x1B[94m","\x1B[39m"),magentaBright:t("\x1B[95m","\x1B[39m"),cyanBright:t("\x1B[96m","\x1B[39m"),whiteBright:t("\x1B[97m","\x1B[39m"),bgBlackBright:t("\x1B[100m","\x1B[49m"),bgRedBright:t("\x1B[101m","\x1B[49m"),bgGreenBright:t("\x1B[102m","\x1B[49m"),bgYellowBright:t("\x1B[103m","\x1B[49m"),bgBlueBright:t("\x1B[104m","\x1B[49m"),bgMagentaBright:t("\x1B[105m","\x1B[49m"),bgCyanBright:t("\x1B[106m","\x1B[49m"),bgWhiteBright:t("\x1B[107m","\x1B[49m")}};Hs.exports=Oi();Hs.exports.createColors=Oi});var or=Object.defineProperty,_=(e,t)=>or(e,"name",{value:t,configurable:!0}),ur="known-flag",ar="unknown-flag",lr="argument",cr=/\B([A-Z])/g,fr=_(e=>e.replaceAll(cr,"-$1").toLowerCase(),"camelToKebab"),{hasOwnProperty:pr}=Object.prototype,We=_((e,t)=>pr.call(e,t),"hasOwn"),rs=_(e=>typeof e=="function"?[e,!1]:Array.isArray(e)?[e[0],!0]:rs(e.type),"parseFlagType"),Zs=_((e,t)=>e===Boolean?t!=="false":t,"normalizeBoolean"),en=_((e,t)=>typeof t=="boolean"?t:e===Number&&t===""?Number.NaN:e(t),"applyParser"),hr=/[\s.:=]/,mr=_(e=>{let t=`Flag name "${e}"`;if(e.length===0)throw new Error(`${t} cannot be empty`);if(e.length===1)throw new Error(`${t} must be longer than a character`);let s=e.match(hr);if(s)throw new Error(`${t} cannot contain "${s?.[0]}"`)},"validateFlagName"),is=_((e,t,s)=>{if(We(e,t))throw new Error(`Duplicate flags named "${t}"`);e[t]=s},"setFlag"),dr=_(e=>{let t={};for(let s in e){if(!We(e,s))continue;mr(s);let n=e[s],i=[[],...rs(n),n];is(t,s,i);let r=fr(s);if(s!==r&&is(t,r,i),"alias"in n&&typeof n.alias=="string"){let{alias:o}=n,u=`Flag alias "${o}" for flag "${s}"`;if(o.length===0)throw new Error(`${u} cannot be empty`);if(o.length>1)throw new Error(`${u} must be a single character`);is(t,o,i)}}return t},"createRegistry"),Dr=_((e,t)=>{let s={};for(let n in e){if(!We(e,n))continue;let[i,,r,o]=t[n];if(i.length===0&&"default"in o){let{default:u}=o;typeof u=="function"&&(u=u()),s[n]=u}else s[n]=r?i:i.pop()}return s},"finalizeFlags"),mt="--",gr=3,yr=/^-{1,2}\w/,tn=_(e=>{if(!yr.test(e))return;let t=!e.startsWith(mt),s=e.slice(t?1:2),n,i=-1;for(let r of["=",":","."]){let o=s.indexOf(r);o!==-1&&(i===-1||o<i)&&(i=o)}return i!==-1&&(n=s.slice(i+1),s=s.slice(0,i)),[s,n,t]},"parseFlagArgv"),sn=_((e,{onFlag:t,onArgument:s})=>{let n,i=_((r,o)=>{if(typeof n!="function")return!0;n(r,o),n=void 0},"triggerValueCallback");for(let r=0;r<e.length;r+=1){let o=e[r];if(o===mt){i();let a=e.slice(r+1);s?.(a,[r],!0);break}let u=tn(o);if(u){if(i(),!t)continue;let[a,l,c]=u;if(c)for(let f=0;f<a.length;f+=1){i();let p=f===a.length-1;n=t(a[f],p?l:void 0,[r,f+1,p])}else n=t(a,l,[r])}else i(o,[r])&&s?.([o],[r])}i()},"argvIterator"),nn=_((e,t)=>{for(let s=t.length-1;s>=0;s-=1){let[n,i,r]=t[s];if(i){let o=e[n],u=o.slice(0,i);if(r||(u+=o.slice(i+1)),u!=="-"){e[n]=u;continue}}e.splice(n,1)}},"spliceFromArgv"),rn=_((e,t=process.argv.slice(2),{ignore:s}={})=>{let n=[],i=dr(e),r={},o=[];return o[mt]=[],sn(t,{onFlag(u,a,l){let c=(l.length===gr||u.length>1)&&We(i,u);if(!s?.(c?ur:ar,u,a)){if(c){let[f,p]=i[u],m=Zs(p,a),g=_((h,D)=>{n.push(l),D&&n.push(D),f.push(en(p,h||""))},"getFollowingValue");return m===void 0?g:g(m)}We(r,u)||(r[u]=[]),r[u].push(a===void 0?!0:a),n.push(l)}},onArgument:_((u,a,l)=>{s?.(lr,t[a[0]])||(o.push(...u),l?(o[mt]=u,t.splice(a[0])):n.push(a))},"onArgument")}),nn(t,n),{flags:Dr(e,i),unknownFlags:r,_:o}},"typeFlag"),yu=_((e,t,s=process.argv.slice(2))=>{let n=new Set(e.split(",").map(a=>tn(a)?.[0])),[i,r]=rs(t),o=[],u=[];return sn(s,{onFlag:_((a,l,c)=>{if(!n.has(a)||!r&&o.length>0)return;let f=Zs(i,l),p=_((m,g)=>{u.push(c),g&&u.push(g),o.push(en(i,m||""))},"getFollowingValue");return f===void 0?p:p(f)},"onFlag")}),nn(s,u),r?o:o[0]},"getFlag");import Kr from"tty";var br=Object.defineProperty,v=(e,t)=>br(e,"name",{value:t,configurable:!0}),Fr=v(e=>{let t=process.stdout.columns??Number.POSITIVE_INFINITY;return typeof e=="function"&&(e=e(t)),e||(e={}),Array.isArray(e)?{columns:e,stdoutColumns:t}:{columns:e.columns??[],stdoutColumns:e.stdoutColumns??t}},"getOptions");function mn({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}v(mn,"ansiRegex");var wr=mn();function as(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(wr,"")}v(as,"stripAnsi");function dn(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}v(dn,"isAmbiguous");function Dn(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}v(Dn,"isFullWidth");function gn(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9776&&e<=9783||e>=9800&&e<=9811||e===9855||e>=9866&&e<=9871||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101631&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129673||e>=129679&&e<=129734||e>=129742&&e<=129756||e>=129759&&e<=129769||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}v(gn,"isWide");function yn(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}v(yn,"validate");function bn(e,{ambiguousAsWide:t=!1}={}){return yn(e),Dn(e)||gn(e)||t&&dn(e)?2:1}v(bn,"eastAsianWidth");var Er=v(()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,"emojiRegex"),Cr=new Intl.Segmenter,kr=/^\p{Default_Ignorable_Code_Point}$/u;function be(e,t={}){if(typeof e!="string"||e.length===0)return 0;let{ambiguousIsNarrow:s=!0,countAnsiEscapeCodes:n=!1}=t;if(n||(e=as(e)),e.length===0)return 0;let i=0,r={ambiguousAsWide:!s};for(let{segment:o}of Cr.segment(e)){let u=o.codePointAt(0);if(!(u<=31||u>=127&&u<=159)&&!(u>=8203&&u<=8207||u===65279)&&!(u>=768&&u<=879||u>=6832&&u<=6911||u>=7616&&u<=7679||u>=8400&&u<=8447||u>=65056&&u<=65071)&&!(u>=55296&&u<=57343)&&!(u>=65024&&u<=65039)&&!kr.test(o)){if(Er().test(o)){i+=2;continue}i+=bn(u,r)}}return i}v(be,"stringWidth");var Fn=v(e=>Math.max(...e.split(`
`).map(t=>be(t))),"getLongestLineWidth"),Ar=v(e=>{let t=[];for(let s of e){let{length:n}=s,i=n-t.length;for(let r=0;r<i;r+=1)t.push(0);for(let r=0;r<n;r+=1){let o=Fn(s[r]);o>t[r]&&(t[r]=o)}}return t},"getColumnContentWidths"),wn=/^\d+%$/,on={width:"auto",align:"left",contentWidth:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,horizontalPadding:0,paddingLeftString:"",paddingRightString:""},Sr=v((e,t)=>{let s=[];for(let n=0;n<e.length;n+=1){let i=t[n]??"auto";if(typeof i=="number"||i==="auto"||i==="content-width"||typeof i=="string"&&wn.test(i)){s.push({...on,width:i,contentWidth:e[n]});continue}if(i&&typeof i=="object"){let r={...on,...i,contentWidth:e[n]};r.horizontalPadding=r.paddingLeft+r.paddingRight,s.push(r);continue}throw new Error(`Invalid column width: ${JSON.stringify(i)}`)}return s},"initColumns"),vr=v((e,t)=>{for(let s of e){let{width:n}=s;if(n==="content-width"&&(s.width=s.contentWidth),n==="auto"){let a=Math.min(20,s.contentWidth);s.width=a,s.autoOverflow=s.contentWidth-a}if(typeof n=="string"&&wn.test(n)){let a=Number.parseFloat(n.slice(0,-1))/100;s.width=Math.floor(t*a)-(s.paddingLeft+s.paddingRight)}let{horizontalPadding:i}=s,r=1,o=r+i;if(o>=t){let a=o-t,l=Math.ceil(s.paddingLeft/i*a),c=a-l;s.paddingLeft-=l,s.paddingRight-=c,s.horizontalPadding=s.paddingLeft+s.paddingRight}s.paddingLeftString=s.paddingLeft?" ".repeat(s.paddingLeft):"",s.paddingRightString=s.paddingRight?" ".repeat(s.paddingRight):"";let u=t-s.horizontalPadding;s.width=Math.max(Math.min(s.width,u),r)}},"resolveColumnWidths"),un=v(()=>Object.assign([],{columns:0}),"makeRow"),Br=v((e,t)=>{let s=[un()],[n]=s;for(let i of e){let r=i.width+i.horizontalPadding;n.columns+r>t&&(n=un(),s.push(n)),n.push(i),n.columns+=r}for(let i of s){let r=i.reduce((p,m)=>p+m.width+m.horizontalPadding,0),o=t-r;if(o===0)continue;let u=i.filter(p=>"autoOverflow"in p),a=u.filter(p=>p.autoOverflow>0),l=a.reduce((p,m)=>p+m.autoOverflow,0),c=Math.min(l,o);for(let p of a){let m=Math.floor(p.autoOverflow/l*c);p.width+=m,o-=m}let f=Math.floor(o/u.length);for(let p=0;p<u.length;p+=1){let m=u[p];p===u.length-1?m.width+=o:m.width+=f,o-=f}}return s},"balanceAuto"),$r=v((e,t,s)=>{let n=Sr(s,t);return vr(n,e),Br(n,e)},"computeColumnWidths"),os=10,an=v((e=0)=>t=>`\x1B[${t+e}m`,"wrapAnsi16"),ln=v((e=0)=>t=>`\x1B[${38+e};5;${t}m`,"wrapAnsi256"),cn=v((e=0)=>(t,s,n)=>`\x1B[${38+e};2;${t};${s};${n}m`,"wrapAnsi16m"),L={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(L.modifier);var Nr=Object.keys(L.color),Or=Object.keys(L.bgColor);[...Nr,...Or];function En(){let e=new Map;for(let[t,s]of Object.entries(L)){for(let[n,i]of Object.entries(s))L[n]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},s[n]=L[n],e.set(i[0],i[1]);Object.defineProperty(L,t,{value:s,enumerable:!1})}return Object.defineProperty(L,"codes",{value:e,enumerable:!1}),L.color.close="\x1B[39m",L.bgColor.close="\x1B[49m",L.color.ansi=an(),L.color.ansi256=ln(),L.color.ansi16m=cn(),L.bgColor.ansi=an(os),L.bgColor.ansi256=ln(os),L.bgColor.ansi16m=cn(os),Object.defineProperties(L,{rgbToAnsi256:{value:v((t,s,n)=>t===s&&s===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(n/255*5),"value"),enumerable:!1},hexToRgb:{value:v(t=>{let s=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!s)return[0,0,0];let[n]=s;n.length===3&&(n=[...n].map(r=>r+r).join(""));let i=Number.parseInt(n,16);return[i>>16&255,i>>8&255,i&255]},"value"),enumerable:!1},hexToAnsi256:{value:v(t=>L.rgbToAnsi256(...L.hexToRgb(t)),"value"),enumerable:!1},ansi256ToAnsi:{value:v(t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let s,n,i;if(t>=232)s=((t-232)*10+8)/255,n=s,i=s;else{t-=16;let u=t%36;s=Math.floor(t/36)/5,n=Math.floor(u/6)/5,i=u%6/5}let r=Math.max(s,n,i)*2;if(r===0)return 30;let o=30+(Math.round(i)<<2|Math.round(n)<<1|Math.round(s));return r===2&&(o+=60),o},"value"),enumerable:!1},rgbToAnsi:{value:v((t,s,n)=>L.ansi256ToAnsi(L.rgbToAnsi256(t,s,n)),"value"),enumerable:!1},hexToAnsi:{value:v(t=>L.ansi256ToAnsi(L.hexToAnsi256(t)),"value"),enumerable:!1}}),L}v(En,"assembleStyles");var Tr=En(),Dt=new Set(["\x1B","\x9B"]),Lr=39,ls="\x07",Cn="[",Ir="]",kn="m",dt=`${Ir}8;;`,fn=v(e=>`${Dt.values().next().value}${Cn}${e}${kn}`,"wrapAnsiCode"),pn=v(e=>`${Dt.values().next().value}${dt}${e}${ls}`,"wrapAnsiHyperlink"),xr=v(e=>e.split(" ").map(t=>be(t)),"wordLengths"),us=v((e,t,s)=>{let n=[...t],i=!1,r=!1,o=be(as(e.at(-1)));for(let[u,a]of n.entries()){let l=be(a);if(o+l<=s?e[e.length-1]+=a:(e.push(a),o=0),Dt.has(a)&&(i=!0,r=n.slice(u+1,u+1+dt.length).join("")===dt),i){r?a===ls&&(i=!1,r=!1):a===kn&&(i=!1);continue}o+=l,o===s&&u<n.length-1&&(e.push(""),o=0)}!o&&e.at(-1).length>0&&e.length>1&&(e[e.length-2]+=e.pop())},"wrapWord"),Pr=v(e=>{let t=e.split(" "),s=t.length;for(;s>0&&!(be(t[s-1])>0);)s--;return s===t.length?e:t.slice(0,s).join(" ")+t.slice(s).join("")},"stringVisibleTrimSpacesRight"),Rr=v((e,t,s={})=>{if(s.trim!==!1&&e.trim()==="")return"";let n="",i,r,o=xr(e),u=[""];for(let[f,p]of e.split(" ").entries()){s.trim!==!1&&(u[u.length-1]=u.at(-1).trimStart());let m=be(u.at(-1));if(f!==0&&(m>=t&&(s.wordWrap===!1||s.trim===!1)&&(u.push(""),m=0),(m>0||s.trim===!1)&&(u[u.length-1]+=" ",m++)),s.hard&&o[f]>t){let g=t-m,h=1+Math.floor((o[f]-g-1)/t);Math.floor((o[f]-1)/t)<h&&u.push(""),us(u,p,t);continue}if(m+o[f]>t&&m>0&&o[f]>0){if(s.wordWrap===!1&&m<t){us(u,p,t);continue}u.push("")}if(m+o[f]>t&&s.wordWrap===!1){us(u,p,t);continue}u[u.length-1]+=p}s.trim!==!1&&(u=u.map(f=>Pr(f)));let a=u.join(`
`),l=[...a],c=0;for(let[f,p]of l.entries()){if(n+=p,Dt.has(p)){let{groups:g}=new RegExp(`(?:\\${Cn}(?<code>\\d+)m|\\${dt}(?<uri>.*)${ls})`).exec(a.slice(c))||{groups:{}};if(g.code!==void 0){let h=Number.parseFloat(g.code);i=h===Lr?void 0:h}else g.uri!==void 0&&(r=g.uri.length===0?void 0:g.uri)}let m=Tr.codes.get(Number(i));l[f+1]===`
`?(r&&(n+=pn("")),i&&m&&(n+=fn(m))):p===`
`&&(i&&m&&(n+=fn(i)),r&&(n+=pn(r))),c+=p.length}return n},"exec");function An(e,t,s){return String(e).normalize().replaceAll(`\r
`,`
`).split(`
`).map(n=>Rr(n,t,s)).join(`
`)}v(An,"wrapAnsi");var hn=v(e=>Array.from({length:e}).fill(""),"emptyLines"),_r=v((e,t)=>{let s=[],n=0;for(let i of e){let r=0,o=i.map(a=>{let l=t[n]??"";n+=1,a.preprocess&&(l=a.preprocess(l)),Fn(l)>a.width&&(l=An(l,a.width,{hard:!0}));let c=l.split(`
`);if(a.postprocess){let{postprocess:f}=a;c=c.map((p,m)=>f.call(a,p,m))}return a.paddingTop&&c.unshift(...hn(a.paddingTop)),a.paddingBottom&&c.push(...hn(a.paddingBottom)),c.length>r&&(r=c.length),{...a,lines:c}}),u=[];for(let a=0;a<r;a+=1){let l=o.map(c=>{let f=c.lines[a]??"",p=Number.isFinite(c.width)?" ".repeat(c.width-be(f)):"",m=c.paddingLeftString;return c.align==="right"&&(m+=p),m+=f,c.align==="left"&&(m+=p),m+c.paddingRightString}).join("");u.push(l)}s.push(u.join(`
`))}return s.join(`
`)},"renderRow"),Sn=v((e,t)=>{if(!e||e.length===0)return"";let s=Ar(e),n=s.length;if(n===0)return"";let{stdoutColumns:i,columns:r}=Fr(t);if(r.length>n)throw new Error(`${r.length} columns defined, but only ${n} columns found`);let o=$r(i,r,s);return e.map(u=>_r(o,u)).join(`
`)},"terminalColumns"),jr=["<",">","=",">=","<="],Mr=v(e=>{if(!jr.includes(e))throw new TypeError(`Invalid breakpoint operator: ${e}`)},"assertOperator"),vn=v(e=>{let t=Object.keys(e).map(s=>{let[n,i]=s.split(" ");Mr(n);let r=Number.parseInt(i,10);if(Number.isNaN(r))throw new TypeError(`Invalid breakpoint value: ${i}`);let o=e[s];return{operator:n,breakpoint:r,value:o}}).sort((s,n)=>n.breakpoint-s.breakpoint);return s=>t.find(({operator:n,breakpoint:i})=>n==="="&&s===i||n===">"&&s>i||n==="<"&&s<i||n===">="&&s>=i||n==="<="&&s<=i)?.value},"breakpoints");var qr=Object.defineProperty,T=(e,t)=>qr(e,"name",{value:t,configurable:!0}),Vr=T(e=>e.replaceAll(/[\W_]([a-z\d])?/gi,(t,s)=>s?s.toUpperCase():""),"camelCase"),Ur=T(e=>e.replaceAll(/\B([A-Z])/g,"-$1").toLowerCase(),"kebabCase"),Gr={"> 80":[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"auto"}],"> 40":[{width:"auto",paddingLeft:2,paddingRight:8,preprocess:T(e=>e.trim(),"preprocess")},{width:"100%",paddingLeft:2,paddingBottom:1}],"> 0":{stdoutColumns:1e3,columns:[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"content-width"}]}};function $n(e){let t=!1;return{type:"table",data:{tableData:Object.keys(e).sort((s,n)=>s.localeCompare(n)).map(s=>{let n=e[s],i="alias"in n;return i&&(t=!0),{name:s,flag:n,flagFormatted:`--${Ur(s)}`,aliasesEnabled:t,aliasFormatted:i?`-${n.alias}`:void 0}}).map(s=>(s.aliasesEnabled=t,[{type:"flagName",data:s},{type:"flagDescription",data:s}])),tableBreakpoints:Gr}}}T($n,"renderFlags");var Bn=T(e=>!e||(e.version??(e.help?e.help.version:void 0)),"getVersion"),Nn=T(e=>{let t="parent"in e&&e.parent?.name;return(t?`${t} `:"")+e.name},"getName");function On(e){let t=[];e.name&&t.push(Nn(e));let s=Bn(e)??("parent"in e&&Bn(e.parent));if(s&&t.push(`v${s}`),t.length!==0)return{id:"name",type:"text",data:`${t.join(" ")}
`}}T(On,"getNameAndVersion");function Tn(e){let{help:t}=e;if(!(!t||!t.description))return{id:"description",type:"text",data:`${t.description}
`}}T(Tn,"getDescription");function Ln(e){let t=e.help||{};if("usage"in t)return t.usage?{id:"usage",type:"section",data:{title:"Usage:",body:Array.isArray(t.usage)?t.usage.join(`
`):t.usage}}:void 0;if(e.name){let s=[],n=[Nn(e)];if(e.flags&&Object.keys(e.flags).length>0&&n.push("[flags...]"),e.parameters&&e.parameters.length>0){let{parameters:i}=e,r=i.indexOf("--"),o=r!==-1&&i.slice(r+1).some(u=>u.startsWith("<"));n.push(i.map(u=>u!=="--"?u:o?"--":"[--]").join(" "))}if(n.length>1&&s.push(n.join(" ")),"commands"in e&&e.commands?.length&&s.push(`${e.name} <command>`),s.length>0)return{id:"usage",type:"section",data:{title:"Usage:",body:s.join(`
`)}}}}T(Ln,"getUsage");function In(e){return!("commands"in e)||!e.commands?.length?void 0:{id:"commands",type:"section",data:{title:"Commands:",body:{type:"table",data:{tableData:e.commands.map(t=>{let{help:s}=t.options;return[t.options.name,typeof s=="object"&&s.description||""]}),tableOptions:[{width:"content-width",paddingLeft:2,paddingRight:8}]}},indentBody:0}}}T(In,"getCommands");function xn(e){if(!(!e.flags||Object.keys(e.flags).length===0))return{id:"flags",type:"section",data:{title:"Flags:",body:$n(e.flags),indentBody:0}}}T(xn,"getFlags");function Pn(e){let{help:t}=e;if(!t||!t.examples||t.examples.length===0)return;let{examples:s}=t;if(Array.isArray(s)&&(s=s.join(`
`)),s)return{id:"examples",type:"section",data:{title:"Examples:",body:s}}}T(Pn,"getExamples");function Rn(e){if(!("alias"in e)||!e.alias)return;let{alias:t}=e;return{id:"aliases",type:"section",data:{title:"Aliases:",body:Array.isArray(t)?t.join(", "):t}}}T(Rn,"getAliases");var Wr=T(e=>[On,Tn,Ln,In,xn,Pn,Rn].map(t=>t(e)).filter(Boolean),"generateHelp"),Hr=Kr.WriteStream.prototype.hasColors(),cs=class{static{T(this,"Renderers")}text(t){return t}bold(t){return Hr?`\x1B[1m${t}\x1B[22m`:t.toLocaleUpperCase()}indentText({text:t,spaces:s}){return t.replaceAll(/^/gm," ".repeat(s))}heading(t){return this.bold(t)}section({title:t,body:s,indentBody:n=2}){return`${(t?`${this.heading(t)}
`:"")+(s?this.indentText({text:this.render(s),spaces:n}):"")}
`}table({tableData:t,tableOptions:s,tableBreakpoints:n}){return Sn(t.map(i=>i.map(r=>this.render(r))),n?vn(n):s)}flagParameter(t){return t===Boolean?"":t===String?"<string>":t===Number?"<number>":Array.isArray(t)?this.flagParameter(t[0]):"<value>"}flagOperator(t){return" "}flagName(t){let{flag:s,flagFormatted:n,aliasesEnabled:i,aliasFormatted:r}=t,o="";if(r?o+=`${r}, `:i&&(o+="    "),o+=n,"placeholder"in s&&typeof s.placeholder=="string")o+=`${this.flagOperator(t)}${s.placeholder}`;else{let u=this.flagParameter("type"in s?s.type:s);u&&(o+=`${this.flagOperator(t)}${u}`)}return o}flagDefault(t){return JSON.stringify(t)}flagDescription({flag:t}){let s="description"in t?t.description??"":"";if("default"in t){let{default:n}=t;typeof n=="function"&&(n=n()),n&&(s+=` (default: ${this.flagDefault(n)})`)}return s}render(t){if(typeof t=="string")return t;if(Array.isArray(t))return t.map(s=>this.render(s)).join(`
`);if("type"in t&&this[t.type]){let s=this[t.type];if(typeof s=="function")return s.call(this,t.data)}throw new Error(`Invalid node type: ${JSON.stringify(t)}`)}},fs=T(e=>e.length>0&&!e.includes(" "),"isValidScriptName"),{stringify:ie}=JSON,Yr=/[|\\{}()[\]^$+*?.]/;function ps(e){let t=[],s,n;for(let i of e){if(n)throw new Error(`Invalid parameter: Spread parameter ${ie(n)} must be last`);let r=i[0],o=i.at(-1),u;if(r==="<"&&o===">"&&(u=!0,s))throw new Error(`Invalid parameter: Required parameter ${ie(i)} cannot come after optional parameter ${ie(s)}`);if(r==="["&&o==="]"&&(u=!1,s=i),u===void 0)throw new Error(`Invalid parameter: ${ie(i)}. Must be wrapped in <> (required parameter) or [] (optional parameter)`);let a=i.slice(1,-1),l=a.slice(-3)==="...";l&&(n=i,a=a.slice(0,-3));let c=a.match(Yr);if(c)throw new Error(`Invalid parameter: ${ie(i)}. Invalid character found ${ie(c[0])}`);t.push({name:a,required:u,spread:l})}return t}T(ps,"parseParameters");function hs(e,t,s,n){for(let i=0;i<t.length;i+=1){let{name:r,required:o,spread:u}=t[i],a=Vr(r);if(a in e)throw new Error(`Invalid parameter: ${ie(r)} is used more than once.`);let l=u?s.slice(i):s[i];if(u&&(i=t.length),o&&(!l||u&&l.length===0))return console.error(`Error: Missing required parameter ${ie(r)}
`),n(),process.exit(1);e[a]=l}}T(hs,"mapParametersToArguments");function _n(e){return e!==!1}T(_n,"helpEnabled");function ms(e,t,s,n){let i={...t.flags},r=t.version&&!("version"in i);r&&(i.version={type:Boolean,description:"Show version"});let{help:o}=t,u=_n(o);u&&!("help"in i)&&(i.help={type:Boolean,alias:"h",description:"Show help"});let a=rn(i,n,{ignore:t.ignoreArgv}),l=T(()=>{console.log(t.version)},"showVersion");if(r&&a.flags.version===!0)return l(),process.exit(0);let c=new cs,f=u&&o?.render?o.render:h=>c.render(h),p=T(h=>{let D=Wr({...t,...h?{help:h}:{},flags:i});console.log(f(D,c))},"showHelp");if(u&&a.flags.help===!0)return p(),process.exit(0);if(t.parameters){let{parameters:h}=t,D=a._,b=h.indexOf("--"),w=h.slice(b+1),E=Object.create(null),C=[];b>-1&&w.length>0&&(h=h.slice(0,b),C=a._["--"],D=D.slice(0,-C.length||void 0)),hs(E,ps(h),D,p),b>-1&&w.length>0&&hs(E,ps(w),C,p),Object.assign(a._,E)}let m={...a,showVersion:l,showHelp:p},g={command:e,...m};if(typeof s=="function"){let h=s(m);if(h&&"then"in h)return Object.assign(Promise.resolve(h),g)}return g}T(ms,"cliBase");function jn(e,t){let s=new Map;for(let n of t){let i=[n.options.name],{alias:r}=n.options;r&&(Array.isArray(r)?i.push(...r):i.push(r));for(let o of i){if(s.has(o))throw new Error(`Duplicate command name found: ${ie(o)}`);s.set(o,n)}}return s.get(e)}T(jn,"getCommand");function ds(e,t,s=process.argv.slice(2)){if(!e)throw new Error("Options is required");if("name"in e&&(!e.name||!fs(e.name)))throw new Error(`Invalid script name: ${ie(e.name)}`);let n=s[0];if(e.commands&&n&&fs(n)){let i=jn(n,e.commands);if(i)return ms(i.options.name,{...i.options,parent:e},i.callback,s.slice(1))}return ms(void 0,e,t,s)}T(ds,"cli");function He(e,t){if(!e)throw new Error("Command options are required");let{name:s}=e;if(s===void 0)throw new Error("Command name is required");if(!fs(s))throw new Error(`Invalid command name ${JSON.stringify(s)}. Command names must be one word.`);return{options:e,callback:t}}T(He,"command");import{join as Qo,dirname as ji,isAbsolute as zo}from"node:path";import{createHash as Bo}from"node:crypto";var gt=Symbol.for("yaml.alias"),yt=Symbol.for("yaml.document"),Y=Symbol.for("yaml.map"),Ds=Symbol.for("yaml.pair"),U=Symbol.for("yaml.scalar"),pe=Symbol.for("yaml.seq"),K=Symbol.for("yaml.node.type"),W=e=>!!e&&typeof e=="object"&&e[K]===gt,re=e=>!!e&&typeof e=="object"&&e[K]===yt,J=e=>!!e&&typeof e=="object"&&e[K]===Y,B=e=>!!e&&typeof e=="object"&&e[K]===Ds,S=e=>!!e&&typeof e=="object"&&e[K]===U,Q=e=>!!e&&typeof e=="object"&&e[K]===pe;function N(e){if(e&&typeof e=="object")switch(e[K]){case Y:case pe:return!0}return!1}function $(e){if(e&&typeof e=="object")switch(e[K]){case gt:case Y:case U:case pe:return!0}return!1}var bt=e=>(S(e)||N(e))&&!!e.anchor;var V=Symbol("break visit"),Mn=Symbol("skip children"),oe=Symbol("remove node");function ue(e,t){let s=qn(t);re(e)?Oe(null,e.contents,s,Object.freeze([e]))===oe&&(e.contents=null):Oe(null,e,s,Object.freeze([]))}ue.BREAK=V;ue.SKIP=Mn;ue.REMOVE=oe;function Oe(e,t,s,n){let i=Kn(e,t,s,n);if($(i)||B(i))return Vn(e,n,i),Oe(e,i,s,n);if(typeof i!="symbol"){if(N(t)){n=Object.freeze(n.concat(t));for(let r=0;r<t.items.length;++r){let o=Oe(r,t.items[r],s,n);if(typeof o=="number")r=o-1;else{if(o===V)return V;o===oe&&(t.items.splice(r,1),r-=1)}}}else if(B(t)){n=Object.freeze(n.concat(t));let r=Oe("key",t.key,s,n);if(r===V)return V;r===oe&&(t.key=null);let o=Oe("value",t.value,s,n);if(o===V)return V;o===oe&&(t.value=null)}}return i}async function Ft(e,t){let s=qn(t);re(e)?await Te(null,e.contents,s,Object.freeze([e]))===oe&&(e.contents=null):await Te(null,e,s,Object.freeze([]))}Ft.BREAK=V;Ft.SKIP=Mn;Ft.REMOVE=oe;async function Te(e,t,s,n){let i=await Kn(e,t,s,n);if($(i)||B(i))return Vn(e,n,i),Te(e,i,s,n);if(typeof i!="symbol"){if(N(t)){n=Object.freeze(n.concat(t));for(let r=0;r<t.items.length;++r){let o=await Te(r,t.items[r],s,n);if(typeof o=="number")r=o-1;else{if(o===V)return V;o===oe&&(t.items.splice(r,1),r-=1)}}}else if(B(t)){n=Object.freeze(n.concat(t));let r=await Te("key",t.key,s,n);if(r===V)return V;r===oe&&(t.key=null);let o=await Te("value",t.value,s,n);if(o===V)return V;o===oe&&(t.value=null)}}return i}function qn(e){return typeof e=="object"&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function Kn(e,t,s,n){if(typeof s=="function")return s(e,t,n);if(J(t))return s.Map?.(e,t,n);if(Q(t))return s.Seq?.(e,t,n);if(B(t))return s.Pair?.(e,t,n);if(S(t))return s.Scalar?.(e,t,n);if(W(t))return s.Alias?.(e,t,n)}function Vn(e,t,s){let n=t[t.length-1];if(N(n))n.items[e]=s;else if(B(n))e==="key"?n.key=s:n.value=s;else if(re(n))n.contents=s;else{let i=W(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}var Jr={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Qr=e=>e.replace(/[!,[\]{}]/g,t=>Jr[t]),ae=class e{constructor(t,s){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},e.defaultYaml,t),this.tags=Object.assign({},e.defaultTags,s)}clone(){let t=new e(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){let t=new e(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:e.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},e.defaultTags);break}return t}add(t,s){this.atNextDocument&&(this.yaml={explicit:e.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},e.defaultTags),this.atNextDocument=!1);let n=t.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(s(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[r,o]=n;return this.tags[r]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length!==1)return s(0,"%YAML directive should contain exactly one part"),!1;let[r]=n;if(r==="1.1"||r==="1.2")return this.yaml.version=r,!0;{let o=/^\d+\.\d+$/.test(r);return s(6,`Unsupported YAML version ${r}`,o),!1}}default:return s(0,`Unknown directive ${i}`,!0),!1}}tagName(t,s){if(t==="!")return"!";if(t[0]!=="!")return s(`Not a valid tag: ${t}`),null;if(t[1]==="<"){let o=t.slice(2,-1);return o==="!"||o==="!!"?(s(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&s("Verbatim tags must end with a >"),o)}let[,n,i]=t.match(/^(.*!)([^!]*)$/s);i||s(`The ${t} tag has no suffix`);let r=this.tags[n];if(r)try{return r+decodeURIComponent(i)}catch(o){return s(String(o)),null}return n==="!"?t:(s(`Could not resolve tag: ${t}`),null)}tagString(t){for(let[s,n]of Object.entries(this.tags))if(t.startsWith(n))return s+Qr(t.substring(n.length));return t[0]==="!"?t:`!<${t}>`}toString(t){let s=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags),i;if(t&&n.length>0&&$(t.contents)){let r={};ue(t.contents,(o,u)=>{$(u)&&u.tag&&(r[u.tag]=!0)}),i=Object.keys(r)}else i=[];for(let[r,o]of n)r==="!!"&&o==="tag:yaml.org,2002:"||(!t||i.some(u=>u.startsWith(o)))&&s.push(`%TAG ${r} ${o}`);return s.join(`
`)}};ae.defaultYaml={explicit:!1,version:"1.2"};ae.defaultTags={"!!":"tag:yaml.org,2002:"};function wt(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){let s=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw new Error(s)}return!0}function gs(e){let t=new Set;return ue(e,{Value(s,n){n.anchor&&t.add(n.anchor)}}),t}function ys(e,t){for(let s=1;;++s){let n=`${e}${s}`;if(!t.has(n))return n}}function Un(e,t){let s=[],n=new Map,i=null;return{onAnchor:r=>{s.push(r),i??(i=gs(e));let o=ys(t,i);return i.add(o),o},setAnchors:()=>{for(let r of s){let o=n.get(r);if(typeof o=="object"&&o.anchor&&(S(o.node)||N(o.node)))o.node.anchor=o.anchor;else{let u=new Error("Failed to resolve repeated object (this should not happen)");throw u.source=r,u}}},sourceObjects:n}}function Fe(e,t,s,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,r=n.length;i<r;++i){let o=n[i],u=Fe(e,n,String(i),o);u===void 0?delete n[i]:u!==o&&(n[i]=u)}else if(n instanceof Map)for(let i of Array.from(n.keys())){let r=n.get(i),o=Fe(e,n,i,r);o===void 0?n.delete(i):o!==r&&n.set(i,o)}else if(n instanceof Set)for(let i of Array.from(n)){let r=Fe(e,n,i,i);r===void 0?n.delete(i):r!==i&&(n.delete(i),n.add(r))}else for(let[i,r]of Object.entries(n)){let o=Fe(e,n,i,r);o===void 0?delete n[i]:o!==r&&(n[i]=o)}return e.call(t,s,n)}function j(e,t,s){if(Array.isArray(e))return e.map((n,i)=>j(n,String(i),s));if(e&&typeof e.toJSON=="function"){if(!s||!bt(e))return e.toJSON(t,s);let n={aliasCount:0,count:1,res:void 0};s.anchors.set(e,n),s.onCreate=r=>{n.res=r,delete s.onCreate};let i=e.toJSON(t,s);return s.onCreate&&s.onCreate(i),i}return typeof e=="bigint"&&!s?.keep?Number(e):e}var we=class{constructor(t){Object.defineProperty(this,K,{value:t})}clone(){let t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:s,maxAliasCount:n,onAnchor:i,reviver:r}={}){if(!re(t))throw new TypeError("A document argument is required");let o={anchors:new Map,doc:t,keep:!0,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},u=j(this,"",o);if(typeof i=="function")for(let{count:a,res:l}of o.anchors.values())i(l,a);return typeof r=="function"?Fe(r,{"":u},"",u):u}};var he=class extends we{constructor(t){super(gt),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,s){let n;s?.aliasResolveCache?n=s.aliasResolveCache:(n=[],ue(t,{Node:(r,o)=>{(W(o)||bt(o))&&n.push(o)}}),s&&(s.aliasResolveCache=n));let i;for(let r of n){if(r===this)break;r.anchor===this.source&&(i=r)}return i}toJSON(t,s){if(!s)return{source:this.source};let{anchors:n,doc:i,maxAliasCount:r}=s,o=this.resolve(i,s);if(!o){let a=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(a)}let u=n.get(o);if(u||(j(o,null,s),u=n.get(o)),u?.res===void 0){let a="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(a)}if(r>=0&&(u.count+=1,u.aliasCount===0&&(u.aliasCount=Et(i,o,n)),u.count*u.aliasCount>r)){let a="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(a)}return u.res}toString(t,s,n){let i=`*${this.source}`;if(t){if(wt(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){let r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(r)}if(t.implicitKey)return`${i} `}return i}};function Et(e,t,s){if(W(t)){let n=t.resolve(e),i=s&&n&&s.get(n);return i?i.count*i.aliasCount:0}else if(N(t)){let n=0;for(let i of t.items){let r=Et(e,i,s);r>n&&(n=r)}return n}else if(B(t)){let n=Et(e,t.key,s),i=Et(e,t.value,s);return Math.max(n,i)}return 1}var Ct=e=>!e||typeof e!="function"&&typeof e!="object",y=class extends we{constructor(t){super(U),this.value=t}toJSON(t,s){return s?.keep?this.value:j(this.value,t,s)}toString(){return String(this.value)}};y.BLOCK_FOLDED="BLOCK_FOLDED";y.BLOCK_LITERAL="BLOCK_LITERAL";y.PLAIN="PLAIN";y.QUOTE_DOUBLE="QUOTE_DOUBLE";y.QUOTE_SINGLE="QUOTE_SINGLE";var zr="tag:yaml.org,2002:";function Xr(e,t,s){if(t){let n=s.filter(r=>r.tag===t),i=n.find(r=>!r.format)??n[0];if(!i)throw new Error(`Tag ${t} not found`);return i}return s.find(n=>n.identify?.(e)&&!n.format)}function me(e,t,s){if(re(e)&&(e=e.contents),$(e))return e;if(B(e)){let f=s.schema[Y].createNode?.(s.schema,null,s);return f.items.push(e),f}(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt<"u"&&e instanceof BigInt)&&(e=e.valueOf());let{aliasDuplicateObjects:n,onAnchor:i,onTagObj:r,schema:o,sourceObjects:u}=s,a;if(n&&e&&typeof e=="object"){if(a=u.get(e),a)return a.anchor??(a.anchor=i(e)),new he(a.anchor);a={anchor:null,node:null},u.set(e,a)}t?.startsWith("!!")&&(t=zr+t.slice(2));let l=Xr(e,t,o.tags);if(!l){if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),!e||typeof e!="object"){let f=new y(e);return a&&(a.node=f),f}l=e instanceof Map?o[Y]:Symbol.iterator in Object(e)?o[pe]:o[Y]}r&&(r(l),delete s.onTagObj);let c=l?.createNode?l.createNode(s.schema,e,s):typeof l?.nodeClass?.from=="function"?l.nodeClass.from(s.schema,e,s):new y(e);return t?c.tag=t:l.default||(c.tag=l.tag),a&&(a.node=c),c}function Ye(e,t,s){let n=s;for(let i=t.length-1;i>=0;--i){let r=t[i];if(typeof r=="number"&&Number.isInteger(r)&&r>=0){let o=[];o[r]=n,n=o}else n=new Map([[r,n]])}return me(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}var Ie=e=>e==null||typeof e=="object"&&!!e[Symbol.iterator]().next().done,Le=class extends we{constructor(t,s){super(t),Object.defineProperty(this,"schema",{value:s,configurable:!0,enumerable:!1,writable:!0})}clone(t){let s=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(s.schema=t),s.items=s.items.map(n=>$(n)||B(n)?n.clone(t):n),this.range&&(s.range=this.range.slice()),s}addIn(t,s){if(Ie(t))this.add(s);else{let[n,...i]=t,r=this.get(n,!0);if(N(r))r.addIn(i,s);else if(r===void 0&&this.schema)this.set(n,Ye(this.schema,i,s));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(t){let[s,...n]=t;if(n.length===0)return this.delete(s);let i=this.get(s,!0);if(N(i))return i.deleteIn(n);throw new Error(`Expected YAML collection at ${s}. Remaining path: ${n}`)}getIn(t,s){let[n,...i]=t,r=this.get(n,!0);return i.length===0?!s&&S(r)?r.value:r:N(r)?r.getIn(i,s):void 0}hasAllNullValues(t){return this.items.every(s=>{if(!B(s))return!1;let n=s.value;return n==null||t&&S(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(t){let[s,...n]=t;if(n.length===0)return this.has(s);let i=this.get(s,!0);return N(i)?i.hasIn(n):!1}setIn(t,s){let[n,...i]=t;if(i.length===0)this.set(n,s);else{let r=this.get(n,!0);if(N(r))r.setIn(i,s);else if(r===void 0&&this.schema)this.set(n,Ye(this.schema,i,s));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}};var Gn=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function H(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}var le=(e,t,s)=>e.endsWith(`
`)?H(s,t):s.includes(`
`)?`
`+H(s,t):(e.endsWith(" ")?"":" ")+s;var bs="flow",kt="block",Je="quoted";function Qe(e,t,s="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:r=20,onFold:o,onOverflow:u}={}){if(!i||i<0)return e;i<r&&(r=0);let a=Math.max(1+r,1+i-t.length);if(e.length<=a)return e;let l=[],c={},f=i-t.length;typeof n=="number"&&(n>i-Math.max(2,r)?l.push(0):f=i-n);let p,m,g=!1,h=-1,D=-1,b=-1;s===kt&&(h=Wn(e,h,t.length),h!==-1&&(f=h+a));for(let E;E=e[h+=1];){if(s===Je&&E==="\\"){switch(D=h,e[h+1]){case"x":h+=3;break;case"u":h+=5;break;case"U":h+=9;break;default:h+=1}b=h}if(E===`
`)s===kt&&(h=Wn(e,h,t.length)),f=h+t.length+a,p=void 0;else{if(E===" "&&m&&m!==" "&&m!==`
`&&m!=="	"){let C=e[h+1];C&&C!==" "&&C!==`
`&&C!=="	"&&(p=h)}if(h>=f)if(p)l.push(p),f=p+a,p=void 0;else if(s===Je){for(;m===" "||m==="	";)m=E,E=e[h+=1],g=!0;let C=h>b+1?h-2:D-1;if(c[C])return e;l.push(C),c[C]=!0,f=C+a,p=void 0}else g=!0}m=E}if(g&&u&&u(),l.length===0)return e;o&&o();let w=e.slice(0,l[0]);for(let E=0;E<l.length;++E){let C=l[E],k=l[E+1]||e.length;C===0?w=`
${t}${e.slice(0,k)}`:(s===Je&&c[C]&&(w+=`${e[C]}\\`),w+=`
${t}${e.slice(C+1,k)}`)}return w}function Wn(e,t,s){let n=t,i=t+1,r=e[i];for(;r===" "||r==="	";)if(t<i+s)r=e[++t];else{do r=e[++t];while(r&&r!==`
`);n=t,i=t+1,r=e[i]}return n}var St=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),vt=e=>/^(%|---|\.\.\.)/m.test(e);function Zr(e,t,s){if(!t||t<0)return!1;let n=t-s,i=e.length;if(i<=n)return!1;for(let r=0,o=0;r<i;++r)if(e[r]===`
`){if(r-o>n)return!0;if(o=r+1,i-o<=n)return!1}return!0}function ze(e,t){let s=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return s;let{implicitKey:n}=t,i=t.options.doubleQuotedMinMultiLineLength,r=t.indent||(vt(e)?"  ":""),o="",u=0;for(let a=0,l=s[a];l;l=s[++a])if(l===" "&&s[a+1]==="\\"&&s[a+2]==="n"&&(o+=s.slice(u,a)+"\\ ",a+=1,u=a,l="\\"),l==="\\")switch(s[a+1]){case"u":{o+=s.slice(u,a);let c=s.substr(a+2,4);switch(c){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:c.substr(0,2)==="00"?o+="\\x"+c.substr(2):o+=s.substr(a,6)}a+=5,u=a+1}break;case"n":if(n||s[a+2]==='"'||s.length<i)a+=1;else{for(o+=s.slice(u,a)+`

`;s[a+2]==="\\"&&s[a+3]==="n"&&s[a+4]!=='"';)o+=`
`,a+=2;o+=r,s[a+2]===" "&&(o+="\\"),a+=1,u=a+1}break;default:a+=1}return o=u?o+s.slice(u):s,n?o:Qe(o,r,Je,St(t,!1))}function Fs(e,t){if(t.options.singleQuote===!1||t.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return ze(e,t);let s=t.indent||(vt(e)?"  ":""),n="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${s}`)+"'";return t.implicitKey?n:Qe(n,s,bs,St(t,!1))}function xe(e,t){let{singleQuote:s}=t.options,n;if(s===!1)n=ze;else{let i=e.includes('"'),r=e.includes("'");i&&!r?n=Fs:r&&!i?n=ze:n=s?Fs:ze}return n(e,t)}var ws;try{ws=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{ws=/\n+(?!\n|$)/g}function At({comment:e,type:t,value:s},n,i,r){let{blockQuote:o,commentString:u,lineWidth:a}=n.options;if(!o||/\n[\t ]+$/.test(s))return xe(s,n);let l=n.indent||(n.forceBlockIndent||vt(s)?"  ":""),c=o==="literal"?!0:o==="folded"||t===y.BLOCK_FOLDED?!1:t===y.BLOCK_LITERAL?!0:!Zr(s,a,l.length);if(!s)return c?`|
`:`>
`;let f,p;for(p=s.length;p>0;--p){let k=s[p-1];if(k!==`
`&&k!=="	"&&k!==" ")break}let m=s.substring(p),g=m.indexOf(`
`);g===-1?f="-":s===m||g!==m.length-1?(f="+",r&&r()):f="",m&&(s=s.slice(0,-m.length),m[m.length-1]===`
`&&(m=m.slice(0,-1)),m=m.replace(ws,`$&${l}`));let h=!1,D,b=-1;for(D=0;D<s.length;++D){let k=s[D];if(k===" ")h=!0;else if(k===`
`)b=D;else break}let w=s.substring(0,b<D?b+1:D);w&&(s=s.substring(w.length),w=w.replace(/\n+/g,`$&${l}`));let C=(h?l?"2":"1":"")+f;if(e&&(C+=" "+u(e.replace(/ ?[\r\n]+/g," ")),i&&i()),!c){let k=s.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`),A=!1,O=St(n,!0);o!=="folded"&&t!==y.BLOCK_FOLDED&&(O.onOverflow=()=>{A=!0});let F=Qe(`${w}${k}${m}`,l,kt,O);if(!A)return`>${C}
${l}${F}`}return s=s.replace(/\n+/g,`$&${l}`),`|${C}
${l}${w}${s}${m}`}function eo(e,t,s,n){let{type:i,value:r}=e,{actualString:o,implicitKey:u,indent:a,indentStep:l,inFlow:c}=t;if(u&&r.includes(`
`)||c&&/[[\]{},]/.test(r))return xe(r,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(r))return u||c||!r.includes(`
`)?xe(r,t):At(e,t,s,n);if(!u&&!c&&i!==y.PLAIN&&r.includes(`
`))return At(e,t,s,n);if(vt(r)){if(a==="")return t.forceBlockIndent=!0,At(e,t,s,n);if(u&&a===l)return xe(r,t)}let f=r.replace(/\n+/g,`$&
${a}`);if(o){let p=h=>h.default&&h.tag!=="tag:yaml.org,2002:str"&&h.test?.test(f),{compat:m,tags:g}=t.doc.schema;if(g.some(p)||m?.some(p))return xe(r,t)}return u?f:Qe(f,a,bs,St(t,!1))}function ve(e,t,s,n){let{implicitKey:i,inFlow:r}=t,o=typeof e.value=="string"?e:Object.assign({},e,{value:String(e.value)}),{type:u}=e;u!==y.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(u=y.QUOTE_DOUBLE);let a=c=>{switch(c){case y.BLOCK_FOLDED:case y.BLOCK_LITERAL:return i||r?xe(o.value,t):At(o,t,s,n);case y.QUOTE_DOUBLE:return ze(o.value,t);case y.QUOTE_SINGLE:return Fs(o.value,t);case y.PLAIN:return eo(o,t,s,n);default:return null}},l=a(u);if(l===null){let{defaultKeyType:c,defaultStringType:f}=t.options,p=i&&c||f;if(l=a(p),l===null)throw new Error(`Unsupported default string type ${p}`)}return l}function Bt(e,t){let s=Object.assign({blockQuote:!0,commentString:Gn,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t),n;switch(s.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:e,flowCollectionPadding:s.flowCollectionPadding?" ":"",indent:"",indentStep:typeof s.indent=="number"?" ".repeat(s.indent):"  ",inFlow:n,options:s}}function to(e,t){if(t.tag){let i=e.filter(r=>r.tag===t.tag);if(i.length>0)return i.find(r=>r.format===t.format)??i[0]}let s,n;if(S(t)){n=t.value;let i=e.filter(r=>r.identify?.(n));if(i.length>1){let r=i.filter(o=>o.test);r.length>0&&(i=r)}s=i.find(r=>r.format===t.format)??i.find(r=>!r.format)}else n=t,s=e.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!s){let i=n?.constructor?.name??(n===null?"null":typeof n);throw new Error(`Tag not resolved for ${i} value`)}return s}function so(e,t,{anchors:s,doc:n}){if(!n.directives)return"";let i=[],r=(S(e)||N(e))&&e.anchor;r&&wt(r)&&(s.add(r),i.push(`&${r}`));let o=e.tag??(t.default?null:t.tag);return o&&i.push(n.directives.tagString(o)),i.join(" ")}function de(e,t,s,n){if(B(e))return e.toString(t,s,n);if(W(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let i,r=$(e)?e:t.doc.createNode(e,{onTagObj:a=>i=a});i??(i=to(t.doc.schema.tags,r));let o=so(r,i,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);let u=typeof i.stringify=="function"?i.stringify(r,t,s,n):S(r)?ve(r,t,s,n):r.toString(t,s,n);return o?S(r)||u[0]==="{"||u[0]==="["?`${o} ${u}`:`${o}
${t.indent}${u}`:u}function Hn({key:e,value:t},s,n,i){let{allNullValues:r,doc:o,indent:u,indentStep:a,options:{commentString:l,indentSeq:c,simpleKeys:f}}=s,p=$(e)&&e.comment||null;if(f){if(p)throw new Error("With simple keys, key nodes cannot have comments");if(N(e)||!$(e)&&typeof e=="object"){let O="With simple keys, collection cannot be used as a key value";throw new Error(O)}}let m=!f&&(!e||p&&t==null&&!s.inFlow||N(e)||(S(e)?e.type===y.BLOCK_FOLDED||e.type===y.BLOCK_LITERAL:typeof e=="object"));s=Object.assign({},s,{allNullValues:!1,implicitKey:!m&&(f||!r),indent:u+a});let g=!1,h=!1,D=de(e,s,()=>g=!0,()=>h=!0);if(!m&&!s.inFlow&&D.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");m=!0}if(s.inFlow){if(r||t==null)return g&&n&&n(),D===""?"?":m?`? ${D}`:D}else if(r&&!f||t==null&&m)return D=`? ${D}`,p&&!g?D+=le(D,s.indent,l(p)):h&&i&&i(),D;g&&(p=null),m?(p&&(D+=le(D,s.indent,l(p))),D=`? ${D}
${u}:`):(D=`${D}:`,p&&(D+=le(D,s.indent,l(p))));let b,w,E;$(t)?(b=!!t.spaceBefore,w=t.commentBefore,E=t.comment):(b=!1,w=null,E=null,t&&typeof t=="object"&&(t=o.createNode(t))),s.implicitKey=!1,!m&&!p&&S(t)&&(s.indentAtStart=D.length+1),h=!1,!c&&a.length>=2&&!s.inFlow&&!m&&Q(t)&&!t.flow&&!t.tag&&!t.anchor&&(s.indent=s.indent.substring(2));let C=!1,k=de(t,s,()=>C=!0,()=>h=!0),A=" ";if(p||b||w){if(A=b?`
`:"",w){let O=l(w);A+=`
${H(O,s.indent)}`}k===""&&!s.inFlow?A===`
`&&E&&(A=`

`):A+=`
${s.indent}`}else if(!m&&N(t)){let O=k[0],F=k.indexOf(`
`),P=F!==-1,ye=s.inFlow??t.flow??t.items.length===0;if(P||!ye){let Ne=!1;if(P&&(O==="&"||O==="!")){let R=k.indexOf(" ");O==="&"&&R!==-1&&R<F&&k[R+1]==="!"&&(R=k.indexOf(" ",R+1)),(R===-1||F<R)&&(Ne=!0)}Ne||(A=`
${s.indent}`)}}else(k===""||k[0]===`
`)&&(A="");return D+=A+k,s.inFlow?C&&n&&n():E&&!C?D+=le(D,s.indent,l(E)):h&&i&&i(),D}function $t(e,t){(e==="debug"||e==="warn")&&console.warn(t)}var Nt="<<",z={identify:e=>e===Nt||typeof e=="symbol"&&e.description===Nt,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new y(Symbol(Nt)),{addToJSMap:Cs}),stringify:()=>Nt},Yn=(e,t)=>(z.identify(t)||S(t)&&(!t.type||t.type===y.PLAIN)&&z.identify(t.value))&&e?.doc.schema.tags.some(s=>s.tag===z.tag&&s.default);function Cs(e,t,s){if(s=e&&W(s)?s.resolve(e.doc):s,Q(s))for(let n of s.items)Es(e,t,n);else if(Array.isArray(s))for(let n of s)Es(e,t,n);else Es(e,t,s)}function Es(e,t,s){let n=e&&W(s)?s.resolve(e.doc):s;if(!J(n))throw new Error("Merge sources must be maps or map aliases");let i=n.toJSON(null,e,Map);for(let[r,o]of i)t instanceof Map?t.has(r)||t.set(r,o):t instanceof Set?t.add(r):Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{value:o,writable:!0,enumerable:!0,configurable:!0});return t}function Ot(e,t,{key:s,value:n}){if($(s)&&s.addToJSMap)s.addToJSMap(e,t,n);else if(Yn(e,s))Cs(e,t,n);else{let i=j(s,"",e);if(t instanceof Map)t.set(i,j(n,i,e));else if(t instanceof Set)t.add(i);else{let r=no(s,i,e),o=j(n,r,e);r in t?Object.defineProperty(t,r,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[r]=o}}return t}function no(e,t,s){if(t===null)return"";if(typeof t!="object")return String(t);if($(e)&&s?.doc){let n=Bt(s.doc,{});n.anchors=new Set;for(let r of s.anchors.keys())n.anchors.add(r.anchor);n.inFlow=!0,n.inStringifyKey=!0;let i=e.toString(n);if(!s.mapKeyWarned){let r=JSON.stringify(i);r.length>40&&(r=r.substring(0,36)+'..."'),$t(s.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${r}. Set mapAsMap: true to use object keys.`),s.mapKeyWarned=!0}return i}return JSON.stringify(t)}function Pe(e,t,s){let n=me(e,void 0,s),i=me(t,void 0,s);return new I(n,i)}var I=class e{constructor(t,s=null){Object.defineProperty(this,K,{value:Ds}),this.key=t,this.value=s}clone(t){let{key:s,value:n}=this;return $(s)&&(s=s.clone(t)),$(n)&&(n=n.clone(t)),new e(s,n)}toJSON(t,s){let n=s?.mapAsMap?new Map:{};return Ot(s,n,this)}toString(t,s,n){return t?.doc?Hn(this,t,s,n):JSON.stringify(this)}};function Lt(e,t,s){return(t.inFlow??e.flow?ro:io)(e,t,s)}function io({comment:e,items:t},s,{blockItemPrefix:n,flowChars:i,itemIndent:r,onChompKeep:o,onComment:u}){let{indent:a,options:{commentString:l}}=s,c=Object.assign({},s,{indent:r,type:null}),f=!1,p=[];for(let g=0;g<t.length;++g){let h=t[g],D=null;if($(h))!f&&h.spaceBefore&&p.push(""),Tt(s,p,h.commentBefore,f),h.comment&&(D=h.comment);else if(B(h)){let w=$(h.key)?h.key:null;w&&(!f&&w.spaceBefore&&p.push(""),Tt(s,p,w.commentBefore,f))}f=!1;let b=de(h,c,()=>D=null,()=>f=!0);D&&(b+=le(b,r,l(D))),f&&D&&(f=!1),p.push(n+b)}let m;if(p.length===0)m=i.start+i.end;else{m=p[0];for(let g=1;g<p.length;++g){let h=p[g];m+=h?`
${a}${h}`:`
`}}return e?(m+=`
`+H(l(e),a),u&&u()):f&&o&&o(),m}function ro({items:e},t,{flowChars:s,itemIndent:n}){let{indent:i,indentStep:r,flowCollectionPadding:o,options:{commentString:u}}=t;n+=r;let a=Object.assign({},t,{indent:n,inFlow:!0,type:null}),l=!1,c=0,f=[];for(let g=0;g<e.length;++g){let h=e[g],D=null;if($(h))h.spaceBefore&&f.push(""),Tt(t,f,h.commentBefore,!1),h.comment&&(D=h.comment);else if(B(h)){let w=$(h.key)?h.key:null;w&&(w.spaceBefore&&f.push(""),Tt(t,f,w.commentBefore,!1),w.comment&&(l=!0));let E=$(h.value)?h.value:null;E?(E.comment&&(D=E.comment),E.commentBefore&&(l=!0)):h.value==null&&w?.comment&&(D=w.comment)}D&&(l=!0);let b=de(h,a,()=>D=null);g<e.length-1&&(b+=","),D&&(b+=le(b,n,u(D))),!l&&(f.length>c||b.includes(`
`))&&(l=!0),f.push(b),c=f.length}let{start:p,end:m}=s;if(f.length===0)return p+m;if(!l){let g=f.reduce((h,D)=>h+D.length+2,2);l=t.options.lineWidth>0&&g>t.options.lineWidth}if(l){let g=p;for(let h of f)g+=h?`
${r}${i}${h}`:`
`;return`${g}
${i}${m}`}else return`${p}${o}${f.join(" ")}${o}${m}`}function Tt({indent:e,options:{commentString:t}},s,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){let r=H(t(n),e);s.push(r.trimStart())}}function Ee(e,t){let s=S(t)?t.value:t;for(let n of e)if(B(n)&&(n.key===t||n.key===s||S(n.key)&&n.key.value===s))return n}var x=class extends Le{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(Y,t),this.items=[]}static from(t,s,n){let{keepUndefined:i,replacer:r}=n,o=new this(t),u=(a,l)=>{if(typeof r=="function")l=r.call(s,a,l);else if(Array.isArray(r)&&!r.includes(a))return;(l!==void 0||i)&&o.items.push(Pe(a,l,n))};if(s instanceof Map)for(let[a,l]of s)u(a,l);else if(s&&typeof s=="object")for(let a of Object.keys(s))u(a,s[a]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}add(t,s){let n;B(t)?n=t:!t||typeof t!="object"||!("key"in t)?n=new I(t,t?.value):n=new I(t.key,t.value);let i=Ee(this.items,n.key),r=this.schema?.sortMapEntries;if(i){if(!s)throw new Error(`Key ${n.key} already set`);S(i.value)&&Ct(n.value)?i.value.value=n.value:i.value=n.value}else if(r){let o=this.items.findIndex(u=>r(n,u)<0);o===-1?this.items.push(n):this.items.splice(o,0,n)}else this.items.push(n)}delete(t){let s=Ee(this.items,t);return s?this.items.splice(this.items.indexOf(s),1).length>0:!1}get(t,s){let i=Ee(this.items,t)?.value;return(!s&&S(i)?i.value:i)??void 0}has(t){return!!Ee(this.items,t)}set(t,s){this.add(new I(t,s),!0)}toJSON(t,s,n){let i=n?new n:s?.mapAsMap?new Map:{};s?.onCreate&&s.onCreate(i);for(let r of this.items)Ot(s,i,r);return i}toString(t,s,n){if(!t)return JSON.stringify(this);for(let i of this.items)if(!B(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),Lt(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:s})}};var X={collection:"map",default:!0,nodeClass:x,tag:"tag:yaml.org,2002:map",resolve(e,t){return J(e)||t("Expected a mapping for this tag"),e},createNode:(e,t,s)=>x.from(e,t,s)};var M=class extends Le{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(pe,t),this.items=[]}add(t){this.items.push(t)}delete(t){let s=It(t);return typeof s!="number"?!1:this.items.splice(s,1).length>0}get(t,s){let n=It(t);if(typeof n!="number")return;let i=this.items[n];return!s&&S(i)?i.value:i}has(t){let s=It(t);return typeof s=="number"&&s<this.items.length}set(t,s){let n=It(t);if(typeof n!="number")throw new Error(`Expected a valid index, not ${t}.`);let i=this.items[n];S(i)&&Ct(s)?i.value=s:this.items[n]=s}toJSON(t,s){let n=[];s?.onCreate&&s.onCreate(n);let i=0;for(let r of this.items)n.push(j(r,String(i++),s));return n}toString(t,s,n){return t?Lt(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:s}):JSON.stringify(this)}static from(t,s,n){let{replacer:i}=n,r=new this(t);if(s&&Symbol.iterator in Object(s)){let o=0;for(let u of s){if(typeof i=="function"){let a=s instanceof Set?u:String(o++);u=i.call(s,a,u)}r.items.push(me(u,void 0,n))}}return r}};function It(e){let t=S(e)?e.value:e;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}var Z={collection:"seq",default:!0,nodeClass:M,tag:"tag:yaml.org,2002:seq",resolve(e,t){return Q(e)||t("Expected a sequence for this tag"),e},createNode:(e,t,s)=>M.from(e,t,s)};var Ce={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,s,n){return t=Object.assign({actualString:!0},t),ve(e,t,s,n)}};var Be={identify:e=>e==null,createNode:()=>new y(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new y(null),stringify:({source:e},t)=>typeof e=="string"&&Be.test.test(e)?e:t.options.nullStr};var Xe={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new y(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},s){if(e&&Xe.test.test(e)){let n=e[0]==="t"||e[0]==="T";if(t===n)return e}return t?s.options.trueStr:s.options.falseStr}};function q({format:e,minFractionDigits:t,tag:s,value:n}){if(typeof n=="bigint")return String(n);let i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let r=Object.is(n,-0)?"-0":JSON.stringify(n);if(!e&&t&&(!s||s==="tag:yaml.org,2002:float")&&/^\d/.test(r)){let o=r.indexOf(".");o<0&&(o=r.length,r+=".");let u=t-(r.length-o-1);for(;u-- >0;)r+="0"}return r}var xt={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:q},Pt={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():q(e)}},Rt={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){let t=new y(parseFloat(e)),s=e.indexOf(".");return s!==-1&&e[e.length-1]==="0"&&(t.minFractionDigits=e.length-s-1),t},stringify:q};var _t=e=>typeof e=="bigint"||Number.isInteger(e),ks=(e,t,s,{intAsBigInt:n})=>n?BigInt(e):parseInt(e.substring(t),s);function Jn(e,t,s){let{value:n}=e;return _t(n)&&n>=0?s+n.toString(t):q(e)}var jt={identify:e=>_t(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,s)=>ks(e,2,8,s),stringify:e=>Jn(e,8,"0o")},Mt={identify:_t,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,s)=>ks(e,0,10,s),stringify:q},qt={identify:e=>_t(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,s)=>ks(e,2,16,s),stringify:e=>Jn(e,16,"0x")};var Qn=[X,Z,Ce,Be,Xe,jt,Mt,qt,xt,Pt,Rt];function zn(e){return typeof e=="bigint"||Number.isInteger(e)}var Kt=({value:e})=>JSON.stringify(e),oo=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Kt},{identify:e=>e==null,createNode:()=>new y(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Kt},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:Kt},{identify:zn,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:s})=>s?BigInt(e):parseInt(e,10),stringify:({value:e})=>zn(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Kt}],uo={default:!0,tag:"",test:/^/,resolve(e,t){return t(`Unresolved plain scalar ${JSON.stringify(e)}`),e}},Xn=[X,Z].concat(oo,uo);var Ze={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof atob=="function"){let s=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(s.length);for(let i=0;i<s.length;++i)n[i]=s.charCodeAt(i);return n}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:s},n,i,r){if(!s)return"";let o=s,u;if(typeof btoa=="function"){let a="";for(let l=0;l<o.length;++l)a+=String.fromCharCode(o[l]);u=btoa(a)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=y.BLOCK_LITERAL),t!==y.QUOTE_DOUBLE){let a=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),l=Math.ceil(u.length/a),c=new Array(l);for(let f=0,p=0;f<l;++f,p+=a)c[f]=u.substr(p,a);u=c.join(t===y.BLOCK_LITERAL?`
`:" ")}return ve({comment:e,type:t,value:u},n,i,r)}};function As(e,t){if(Q(e))for(let s=0;s<e.items.length;++s){let n=e.items[s];if(!B(n)){if(J(n)){n.items.length>1&&t("Each pair must have its own sequence indicator");let i=n.items[0]||new I(new y(null));if(n.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${n.commentBefore}
${i.key.commentBefore}`:n.commentBefore),n.comment){let r=i.value??i.key;r.comment=r.comment?`${n.comment}
${r.comment}`:n.comment}n=i}e.items[s]=B(n)?n:new I(n)}}else t("Expected a sequence for this tag");return e}function Ss(e,t,s){let{replacer:n}=s,i=new M(e);i.tag="tag:yaml.org,2002:pairs";let r=0;if(t&&Symbol.iterator in Object(t))for(let o of t){typeof n=="function"&&(o=n.call(t,String(r++),o));let u,a;if(Array.isArray(o))if(o.length===2)u=o[0],a=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){let l=Object.keys(o);if(l.length===1)u=l[0],a=o[u];else throw new TypeError(`Expected tuple with one key, not ${l.length} keys`)}else u=o;i.items.push(Pe(u,a,s))}return i}var et={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:As,createNode:Ss};var Re=class e extends M{constructor(){super(),this.add=x.prototype.add.bind(this),this.delete=x.prototype.delete.bind(this),this.get=x.prototype.get.bind(this),this.has=x.prototype.has.bind(this),this.set=x.prototype.set.bind(this),this.tag=e.tag}toJSON(t,s){if(!s)return super.toJSON(t);let n=new Map;s?.onCreate&&s.onCreate(n);for(let i of this.items){let r,o;if(B(i)?(r=j(i.key,"",s),o=j(i.value,r,s)):r=j(i,"",s),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,o)}return n}static from(t,s,n){let i=Ss(t,s,n),r=new this;return r.items=i.items,r}};Re.tag="tag:yaml.org,2002:omap";var tt={collection:"seq",identify:e=>e instanceof Map,nodeClass:Re,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){let s=As(e,t),n=[];for(let{key:i}of s.items)S(i)&&(n.includes(i.value)?t(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new Re,s)},createNode:(e,t,s)=>Re.from(e,t,s)};function Zn({value:e,source:t},s){return t&&(e?vs:Bs).test.test(t)?t:e?s.options.trueStr:s.options.falseStr}var vs={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new y(!0),stringify:Zn},Bs={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new y(!1),stringify:Zn};var ei={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:q},ti={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():q(e)}},si={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){let t=new y(parseFloat(e.replace(/_/g,""))),s=e.indexOf(".");if(s!==-1){let n=e.substring(s+1).replace(/_/g,"");n[n.length-1]==="0"&&(t.minFractionDigits=n.length)}return t},stringify:q};var st=e=>typeof e=="bigint"||Number.isInteger(e);function Vt(e,t,s,{intAsBigInt:n}){let i=e[0];if((i==="-"||i==="+")&&(t+=1),e=e.substring(t).replace(/_/g,""),n){switch(s){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}let o=BigInt(e);return i==="-"?BigInt(-1)*o:o}let r=parseInt(e,s);return i==="-"?-1*r:r}function $s(e,t,s){let{value:n}=e;if(st(n)){let i=n.toString(t);return n<0?"-"+s+i.substr(1):s+i}return q(e)}var ni={identify:st,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,s)=>Vt(e,2,2,s),stringify:e=>$s(e,2,"0b")},ii={identify:st,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,s)=>Vt(e,1,8,s),stringify:e=>$s(e,8,"0")},ri={identify:st,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,s)=>Vt(e,0,10,s),stringify:q},oi={identify:st,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,s)=>Vt(e,2,16,s),stringify:e=>$s(e,16,"0x")};var _e=class e extends x{constructor(t){super(t),this.tag=e.tag}add(t){let s;B(t)?s=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?s=new I(t.key,null):s=new I(t,null),Ee(this.items,s.key)||this.items.push(s)}get(t,s){let n=Ee(this.items,t);return!s&&B(n)?S(n.key)?n.key.value:n.key:n}set(t,s){if(typeof s!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof s}`);let n=Ee(this.items,t);n&&!s?this.items.splice(this.items.indexOf(n),1):!n&&s&&this.items.push(new I(t))}toJSON(t,s){return super.toJSON(t,s,Set)}toString(t,s,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),s,n);throw new Error("Set items must all have null values")}static from(t,s,n){let{replacer:i}=n,r=new this(t);if(s&&Symbol.iterator in Object(s))for(let o of s)typeof i=="function"&&(o=i.call(s,o,o)),r.items.push(Pe(o,null,n));return r}};_e.tag="tag:yaml.org,2002:set";var nt={collection:"map",identify:e=>e instanceof Set,nodeClass:_e,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,s)=>_e.from(e,t,s),resolve(e,t){if(J(e)){if(e.hasAllNullValues(!0))return Object.assign(new _e,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function Ns(e,t){let s=e[0],n=s==="-"||s==="+"?e.substring(1):e,i=o=>t?BigInt(o):Number(o),r=n.replace(/_/g,"").split(":").reduce((o,u)=>o*i(60)+i(u),i(0));return s==="-"?i(-1)*r:r}function ui(e){let{value:t}=e,s=o=>o;if(typeof t=="bigint")s=o=>BigInt(o);else if(isNaN(t)||!isFinite(t))return q(e);let n="";t<0&&(n="-",t*=s(-1));let i=s(60),r=[t%i];return t<60?r.unshift(0):(t=(t-r[0])/i,r.unshift(t%i),t>=60&&(t=(t-r[0])/i,r.unshift(t))),n+r.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var Ut={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:s})=>Ns(e,s),stringify:ui},Gt={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>Ns(e,!1),stringify:ui},je={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){let t=e.match(je.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,s,n,i,r,o,u]=t.map(Number),a=t[7]?Number((t[7]+"00").substr(1,3)):0,l=Date.UTC(s,n-1,i,r||0,o||0,u||0,a),c=t[8];if(c&&c!=="Z"){let f=Ns(c,!1);Math.abs(f)<30&&(f*=60),l-=6e4*f}return new Date(l)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""};var Os=[X,Z,Ce,Be,vs,Bs,ni,ii,ri,oi,ei,ti,si,Ze,z,tt,et,nt,Ut,Gt,je];var ai=new Map([["core",Qn],["failsafe",[X,Z,Ce]],["json",Xn],["yaml11",Os],["yaml-1.1",Os]]),li={binary:Ze,bool:Xe,float:Rt,floatExp:Pt,floatNaN:xt,floatTime:Gt,int:Mt,intHex:qt,intOct:jt,intTime:Ut,map:X,merge:z,null:Be,omap:tt,pairs:et,seq:Z,set:nt,timestamp:je},ci={"tag:yaml.org,2002:binary":Ze,"tag:yaml.org,2002:merge":z,"tag:yaml.org,2002:omap":tt,"tag:yaml.org,2002:pairs":et,"tag:yaml.org,2002:set":nt,"tag:yaml.org,2002:timestamp":je};function Wt(e,t,s){let n=ai.get(t);if(n&&!e)return s&&!n.includes(z)?n.concat(z):n.slice();let i=n;if(!i)if(Array.isArray(e))i=[];else{let r=Array.from(ai.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${r} or define customTags array`)}if(Array.isArray(e))for(let r of e)i=i.concat(r);else typeof e=="function"&&(i=e(i.slice()));return s&&(i=i.concat(z)),i.reduce((r,o)=>{let u=typeof o=="string"?li[o]:o;if(!u){let a=JSON.stringify(o),l=Object.keys(li).map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown custom tag ${a}; use one of ${l}`)}return r.includes(u)||r.push(u),r},[])}var ao=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0,it=class e{constructor({compat:t,customTags:s,merge:n,resolveKnownTags:i,schema:r,sortMapEntries:o,toStringDefaults:u}){this.compat=Array.isArray(t)?Wt(t,"compat"):t?Wt(null,t):null,this.name=typeof r=="string"&&r||"core",this.knownTags=i?ci:{},this.tags=Wt(s,this.name,n),this.toStringOptions=u??null,Object.defineProperty(this,Y,{value:X}),Object.defineProperty(this,U,{value:Ce}),Object.defineProperty(this,pe,{value:Z}),this.sortMapEntries=typeof o=="function"?o:o===!0?ao:null}clone(){let t=Object.create(e.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}};function fi(e,t){let s=[],n=t.directives===!0;if(t.directives!==!1&&e.directives){let a=e.directives.toString(e);a?(s.push(a),n=!0):e.directives.docStart&&(n=!0)}n&&s.push("---");let i=Bt(e,t),{commentString:r}=i.options;if(e.commentBefore){s.length!==1&&s.unshift("");let a=r(e.commentBefore);s.unshift(H(a,""))}let o=!1,u=null;if(e.contents){if($(e.contents)){if(e.contents.spaceBefore&&n&&s.push(""),e.contents.commentBefore){let c=r(e.contents.commentBefore);s.push(H(c,""))}i.forceBlockIndent=!!e.comment,u=e.contents.comment}let a=u?void 0:()=>o=!0,l=de(e.contents,i,()=>u=null,a);u&&(l+=le(l,"",r(u))),(l[0]==="|"||l[0]===">")&&s[s.length-1]==="---"?s[s.length-1]=`--- ${l}`:s.push(l)}else s.push(de(e.contents,i));if(e.directives?.docEnd)if(e.comment){let a=r(e.comment);a.includes(`
`)?(s.push("..."),s.push(H(a,""))):s.push(`... ${a}`)}else s.push("...");else{let a=e.comment;a&&o&&(a=a.replace(/^\n+/,"")),a&&((!o||u)&&s[s.length-1]!==""&&s.push(""),s.push(H(r(a),"")))}return s.join(`
`)+`
`}var ke=class e{constructor(t,s,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,K,{value:yt});let i=null;typeof s=="function"||Array.isArray(s)?i=s:n===void 0&&s&&(n=s,s=void 0);let r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=r;let{version:o}=r;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new ae({version:o}),this.setSchema(o,n),this.contents=t===void 0?null:this.createNode(t,i,n)}clone(){let t=Object.create(e.prototype,{[K]:{value:yt}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=$(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){Me(this.contents)&&this.contents.add(t)}addIn(t,s){Me(this.contents)&&this.contents.addIn(t,s)}createAlias(t,s){if(!t.anchor){let n=gs(this);t.anchor=!s||n.has(s)?ys(s||"a",n):s}return new he(t.anchor)}createNode(t,s,n){let i;if(typeof s=="function")t=s.call({"":t},"",t),i=s;else if(Array.isArray(s)){let D=w=>typeof w=="number"||w instanceof String||w instanceof Number,b=s.filter(D).map(String);b.length>0&&(s=s.concat(b)),i=s}else n===void 0&&s&&(n=s,s=void 0);let{aliasDuplicateObjects:r,anchorPrefix:o,flow:u,keepUndefined:a,onTagObj:l,tag:c}=n??{},{onAnchor:f,setAnchors:p,sourceObjects:m}=Un(this,o||"a"),g={aliasDuplicateObjects:r??!0,keepUndefined:a??!1,onAnchor:f,onTagObj:l,replacer:i,schema:this.schema,sourceObjects:m},h=me(t,c,g);return u&&N(h)&&(h.flow=!0),p(),h}createPair(t,s,n={}){let i=this.createNode(t,null,n),r=this.createNode(s,null,n);return new I(i,r)}delete(t){return Me(this.contents)?this.contents.delete(t):!1}deleteIn(t){return Ie(t)?this.contents==null?!1:(this.contents=null,!0):Me(this.contents)?this.contents.deleteIn(t):!1}get(t,s){return N(this.contents)?this.contents.get(t,s):void 0}getIn(t,s){return Ie(t)?!s&&S(this.contents)?this.contents.value:this.contents:N(this.contents)?this.contents.getIn(t,s):void 0}has(t){return N(this.contents)?this.contents.has(t):!1}hasIn(t){return Ie(t)?this.contents!==void 0:N(this.contents)?this.contents.hasIn(t):!1}set(t,s){this.contents==null?this.contents=Ye(this.schema,[t],s):Me(this.contents)&&this.contents.set(t,s)}setIn(t,s){Ie(t)?this.contents=s:this.contents==null?this.contents=Ye(this.schema,Array.from(t),s):Me(this.contents)&&this.contents.setIn(t,s)}setSchema(t,s={}){typeof t=="number"&&(t=String(t));let n;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new ae({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new ae({version:t}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{let i=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(s.schema instanceof Object)this.schema=s.schema;else if(n)this.schema=new it(Object.assign(n,s));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:s,mapAsMap:n,maxAliasCount:i,onAnchor:r,reviver:o}={}){let u={anchors:new Map,doc:this,keep:!t,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},a=j(this.contents,s??"",u);if(typeof r=="function")for(let{count:l,res:c}of u.anchors.values())r(c,l);return typeof o=="function"?Fe(o,{"":a},"",a):a}toJSON(t,s){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:s})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){let s=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${s}`)}return fi(this,t)}};function Me(e){if(N(e))return!0;throw new Error("Expected a YAML collection as document contents")}var rt=class extends Error{constructor(t,s,n,i){super(),this.name=t,this.code=n,this.message=i,this.pos=s}},ee=class extends rt{constructor(t,s,n){super("YAMLParseError",t,s,n)}},ot=class extends rt{constructor(t,s,n){super("YAMLWarning",t,s,n)}},Ts=(e,t)=>s=>{if(s.pos[0]===-1)return;s.linePos=s.pos.map(u=>t.linePos(u));let{line:n,col:i}=s.linePos[0];s.message+=` at line ${n}, column ${i}`;let r=i-1,o=e.substring(t.lineStarts[n-1],t.lineStarts[n]).replace(/[\n\r]+$/,"");if(r>=60&&o.length>80){let u=Math.min(r-39,o.length-79);o="\u2026"+o.substring(u),r-=u-1}if(o.length>80&&(o=o.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(o.substring(0,r))){let u=e.substring(t.lineStarts[n-2],t.lineStarts[n-1]);u.length>80&&(u=u.substring(0,79)+`\u2026
`),o=u+o}if(/[^ ]/.test(o)){let u=1,a=s.linePos[1];a?.line===n&&a.col>i&&(u=Math.max(1,Math.min(a.col-i,80-r)));let l=" ".repeat(r)+"^".repeat(u);s.message+=`:

${o}
${l}
`}};function ce(e,{flow:t,indicator:s,next:n,offset:i,onError:r,parentIndent:o,startOnNewline:u}){let a=!1,l=u,c=u,f="",p="",m=!1,g=!1,h=null,D=null,b=null,w=null,E=null,C=null,k=null;for(let F of e)switch(g&&(F.type!=="space"&&F.type!=="newline"&&F.type!=="comma"&&r(F.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),g=!1),h&&(l&&F.type!=="comment"&&F.type!=="newline"&&r(h,"TAB_AS_INDENT","Tabs are not allowed as indentation"),h=null),F.type){case"space":!t&&(s!=="doc-start"||n?.type!=="flow-collection")&&F.source.includes("	")&&(h=F),c=!0;break;case"comment":{c||r(F,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let P=F.source.substring(1)||" ";f?f+=p+P:f=P,p="",l=!1;break}case"newline":l?f?f+=F.source:(!C||s!=="seq-item-ind")&&(a=!0):p+=F.source,l=!0,m=!0,(D||b)&&(w=F),c=!0;break;case"anchor":D&&r(F,"MULTIPLE_ANCHORS","A node can have at most one anchor"),F.source.endsWith(":")&&r(F.offset+F.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),D=F,k??(k=F.offset),l=!1,c=!1,g=!0;break;case"tag":{b&&r(F,"MULTIPLE_TAGS","A node can have at most one tag"),b=F,k??(k=F.offset),l=!1,c=!1,g=!0;break}case s:(D||b)&&r(F,"BAD_PROP_ORDER",`Anchors and tags must be after the ${F.source} indicator`),C&&r(F,"UNEXPECTED_TOKEN",`Unexpected ${F.source} in ${t??"collection"}`),C=F,l=s==="seq-item-ind"||s==="explicit-key-ind",c=!1;break;case"comma":if(t){E&&r(F,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),E=F,l=!1,c=!1;break}default:r(F,"UNEXPECTED_TOKEN",`Unexpected ${F.type} token`),l=!1,c=!1}let A=e[e.length-1],O=A?A.offset+A.source.length:i;return g&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&r(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),h&&(l&&h.indent<=o||n?.type==="block-map"||n?.type==="block-seq")&&r(h,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:E,found:C,spaceBefore:a,comment:f,hasNewline:m,anchor:D,tag:b,newlineAfterProp:w,end:O,start:k??O}}function Ae(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(let t of e.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(let t of e.items){for(let s of t.start)if(s.type==="newline")return!0;if(t.sep){for(let s of t.sep)if(s.type==="newline")return!0}if(Ae(t.key)||Ae(t.value))return!0}return!1;default:return!0}}function ut(e,t,s){if(t?.type==="flow-collection"){let n=t.end[0];n.indent===e&&(n.source==="]"||n.source==="}")&&Ae(t)&&s(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Ht(e,t,s){let{uniqueKeys:n}=e.options;if(n===!1)return!1;let i=typeof n=="function"?n:(r,o)=>r===o||S(r)&&S(o)&&r.value===o.value;return t.some(r=>i(r.key,s))}var pi="All mapping items must start at the same column";function hi({composeNode:e,composeEmptyNode:t},s,n,i,r){let o=r?.nodeClass??x,u=new o(s.schema);s.atRoot&&(s.atRoot=!1);let a=n.offset,l=null;for(let c of n.items){let{start:f,key:p,sep:m,value:g}=c,h=ce(f,{indicator:"explicit-key-ind",next:p??m?.[0],offset:a,onError:i,parentIndent:n.indent,startOnNewline:!0}),D=!h.found;if(D){if(p&&(p.type==="block-seq"?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in p&&p.indent!==n.indent&&i(a,"BAD_INDENT",pi)),!h.anchor&&!h.tag&&!m){l=h.end,h.comment&&(u.comment?u.comment+=`
`+h.comment:u.comment=h.comment);continue}(h.newlineAfterProp||Ae(p))&&i(p??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else h.found?.indent!==n.indent&&i(a,"BAD_INDENT",pi);s.atKey=!0;let b=h.end,w=p?e(s,p,h,i):t(s,b,f,null,h,i);s.schema.compat&&ut(n.indent,p,i),s.atKey=!1,Ht(s,u.items,w)&&i(b,"DUPLICATE_KEY","Map keys must be unique");let E=ce(m??[],{indicator:"map-value-ind",next:g,offset:w.range[2],onError:i,parentIndent:n.indent,startOnNewline:!p||p.type==="block-scalar"});if(a=E.end,E.found){D&&(g?.type==="block-map"&&!E.hasNewline&&i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),s.options.strict&&h.start<E.found.offset-1024&&i(w.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let C=g?e(s,g,E,i):t(s,a,m,null,E,i);s.schema.compat&&ut(n.indent,g,i),a=C.range[2];let k=new I(w,C);s.options.keepSourceTokens&&(k.srcToken=c),u.items.push(k)}else{D&&i(w.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),E.comment&&(w.comment?w.comment+=`
`+E.comment:w.comment=E.comment);let C=new I(w);s.options.keepSourceTokens&&(C.srcToken=c),u.items.push(C)}}return l&&l<a&&i(l,"IMPOSSIBLE","Map comment with trailing content"),u.range=[n.offset,a,l??a],u}function mi({composeNode:e,composeEmptyNode:t},s,n,i,r){let o=r?.nodeClass??M,u=new o(s.schema);s.atRoot&&(s.atRoot=!1),s.atKey&&(s.atKey=!1);let a=n.offset,l=null;for(let{start:c,value:f}of n.items){let p=ce(c,{indicator:"seq-item-ind",next:f,offset:a,onError:i,parentIndent:n.indent,startOnNewline:!0});if(!p.found)if(p.anchor||p.tag||f)f?.type==="block-seq"?i(p.end,"BAD_INDENT","All sequence items must start at the same column"):i(a,"MISSING_CHAR","Sequence item without - indicator");else{l=p.end,p.comment&&(u.comment=p.comment);continue}let m=f?e(s,f,p,i):t(s,p.end,c,null,p,i);s.schema.compat&&ut(n.indent,f,i),a=m.range[2],u.items.push(m)}return u.range=[n.offset,a,l??a],u}function fe(e,t,s,n){let i="";if(e){let r=!1,o="";for(let u of e){let{source:a,type:l}=u;switch(l){case"space":r=!0;break;case"comment":{s&&!r&&n(u,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let c=a.substring(1)||" ";i?i+=o+c:i=c,o="";break}case"newline":i&&(o+=a),r=!0;break;default:n(u,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}t+=a.length}}return{comment:i,offset:t}}var Ls="Block collections are not allowed within flow collections",Is=e=>e&&(e.type==="block-map"||e.type==="block-seq");function di({composeNode:e,composeEmptyNode:t},s,n,i,r){let o=n.start.source==="{",u=o?"flow map":"flow sequence",a=r?.nodeClass??(o?x:M),l=new a(s.schema);l.flow=!0;let c=s.atRoot;c&&(s.atRoot=!1),s.atKey&&(s.atKey=!1);let f=n.offset+n.start.source.length;for(let D=0;D<n.items.length;++D){let b=n.items[D],{start:w,key:E,sep:C,value:k}=b,A=ce(w,{flow:u,indicator:"explicit-key-ind",next:E??C?.[0],offset:f,onError:i,parentIndent:n.indent,startOnNewline:!1});if(!A.found){if(!A.anchor&&!A.tag&&!C&&!k){D===0&&A.comma?i(A.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${u}`):D<n.items.length-1&&i(A.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${u}`),A.comment&&(l.comment?l.comment+=`
`+A.comment:l.comment=A.comment),f=A.end;continue}!o&&s.options.strict&&Ae(E)&&i(E,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(D===0)A.comma&&i(A.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${u}`);else if(A.comma||i(A.start,"MISSING_CHAR",`Missing , between ${u} items`),A.comment){let O="";e:for(let F of w)switch(F.type){case"comma":case"space":break;case"comment":O=F.source.substring(1);break e;default:break e}if(O){let F=l.items[l.items.length-1];B(F)&&(F=F.value??F.key),F.comment?F.comment+=`
`+O:F.comment=O,A.comment=A.comment.substring(O.length+1)}}if(!o&&!C&&!A.found){let O=k?e(s,k,A,i):t(s,A.end,C,null,A,i);l.items.push(O),f=O.range[2],Is(k)&&i(O.range,"BLOCK_IN_FLOW",Ls)}else{s.atKey=!0;let O=A.end,F=E?e(s,E,A,i):t(s,O,w,null,A,i);Is(E)&&i(F.range,"BLOCK_IN_FLOW",Ls),s.atKey=!1;let P=ce(C??[],{flow:u,indicator:"map-value-ind",next:k,offset:F.range[2],onError:i,parentIndent:n.indent,startOnNewline:!1});if(P.found){if(!o&&!A.found&&s.options.strict){if(C)for(let R of C){if(R===P.found)break;if(R.type==="newline"){i(R,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}A.start<P.found.offset-1024&&i(P.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else k&&("source"in k&&k.source?.[0]===":"?i(k,"MISSING_CHAR",`Missing space after : in ${u}`):i(P.start,"MISSING_CHAR",`Missing , or : between ${u} items`));let ye=k?e(s,k,P,i):P.found?t(s,P.end,C,null,P,i):null;ye?Is(k)&&i(ye.range,"BLOCK_IN_FLOW",Ls):P.comment&&(F.comment?F.comment+=`
`+P.comment:F.comment=P.comment);let Ne=new I(F,ye);if(s.options.keepSourceTokens&&(Ne.srcToken=b),o){let R=l;Ht(s,R.items,F)&&i(O,"DUPLICATE_KEY","Map keys must be unique"),R.items.push(Ne)}else{let R=new x(s.schema);R.flow=!0,R.items.push(Ne);let zs=(ye??F).range;R.range=[F.range[0],zs[1],zs[2]],l.items.push(R)}f=ye?ye.range[2]:P.end}}let p=o?"}":"]",[m,...g]=n.end,h=f;if(m?.source===p)h=m.offset+m.source.length;else{let D=u[0].toUpperCase()+u.substring(1),b=c?`${D} must end with a ${p}`:`${D} in block collection must be sufficiently indented and end with a ${p}`;i(f,c?"MISSING_CHAR":"BAD_INDENT",b),m&&m.source.length!==1&&g.unshift(m)}if(g.length>0){let D=fe(g,h,s.options.strict,i);D.comment&&(l.comment?l.comment+=`
`+D.comment:l.comment=D.comment),l.range=[n.offset,h,D.offset]}else l.range=[n.offset,h,h];return l}function xs(e,t,s,n,i,r){let o=s.type==="block-map"?hi(e,t,s,n,r):s.type==="block-seq"?mi(e,t,s,n,r):di(e,t,s,n,r),u=o.constructor;return i==="!"||i===u.tagName?(o.tag=u.tagName,o):(i&&(o.tag=i),o)}function Di(e,t,s,n,i){let r=n.tag,o=r?t.directives.tagName(r.source,p=>i(r,"TAG_RESOLVE_FAILED",p)):null;if(s.type==="block-seq"){let{anchor:p,newlineAfterProp:m}=n,g=p&&r?p.offset>r.offset?p:r:p??r;g&&(!m||m.offset<g.offset)&&i(g,"MISSING_CHAR","Missing newline after block sequence props")}let u=s.type==="block-map"?"map":s.type==="block-seq"?"seq":s.start.source==="{"?"map":"seq";if(!r||!o||o==="!"||o===x.tagName&&u==="map"||o===M.tagName&&u==="seq")return xs(e,t,s,i,o);let a=t.schema.tags.find(p=>p.tag===o&&p.collection===u);if(!a){let p=t.schema.knownTags[o];if(p?.collection===u)t.schema.tags.push(Object.assign({},p,{default:!1})),a=p;else return p?i(r,"BAD_COLLECTION_TYPE",`${p.tag} used for ${u} collection, but expects ${p.collection??"scalar"}`,!0):i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),xs(e,t,s,i,o)}let l=xs(e,t,s,i,o,a),c=a.resolve?.(l,p=>i(r,"TAG_RESOLVE_FAILED",p),t.options)??l,f=$(c)?c:new y(c);return f.range=l.range,f.tag=o,a?.format&&(f.format=a.format),f}function Ps(e,t,s){let n=t.offset,i=lo(t,e.options.strict,s);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};let r=i.mode===">"?y.BLOCK_FOLDED:y.BLOCK_LITERAL,o=t.source?co(t.source):[],u=o.length;for(let h=o.length-1;h>=0;--h){let D=o[h][1];if(D===""||D==="\r")u=h;else break}if(u===0){let h=i.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"",D=n+i.length;return t.source&&(D+=t.source.length),{value:h,type:r,comment:i.comment,range:[n,D,D]}}let a=t.indent+i.indent,l=t.offset+i.length,c=0;for(let h=0;h<u;++h){let[D,b]=o[h];if(b===""||b==="\r")i.indent===0&&D.length>a&&(a=D.length);else{D.length<a&&s(l+D.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(a=D.length),c=h,a===0&&!e.atRoot&&s(l,"BAD_INDENT","Block scalar values in collections must be indented");break}l+=D.length+b.length+1}for(let h=o.length-1;h>=u;--h)o[h][0].length>a&&(u=h+1);let f="",p="",m=!1;for(let h=0;h<c;++h)f+=o[h][0].slice(a)+`
`;for(let h=c;h<u;++h){let[D,b]=o[h];l+=D.length+b.length+1;let w=b[b.length-1]==="\r";if(w&&(b=b.slice(0,-1)),b&&D.length<a){let C=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;s(l-b.length-(w?2:1),"BAD_INDENT",C),D=""}r===y.BLOCK_LITERAL?(f+=p+D.slice(a)+b,p=`
`):D.length>a||b[0]==="	"?(p===" "?p=`
`:!m&&p===`
`&&(p=`

`),f+=p+D.slice(a)+b,p=`
`,m=!0):b===""?p===`
`?f+=`
`:p=`
`:(f+=p+b,p=" ",m=!1)}switch(i.chomp){case"-":break;case"+":for(let h=u;h<o.length;++h)f+=`
`+o[h][0].slice(a);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}let g=n+i.length+t.source.length;return{value:f,type:r,comment:i.comment,range:[n,g,g]}}function lo({offset:e,props:t},s,n){if(t[0].type!=="block-scalar-header")return n(t[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:i}=t[0],r=i[0],o=0,u="",a=-1;for(let p=1;p<i.length;++p){let m=i[p];if(!u&&(m==="-"||m==="+"))u=m;else{let g=Number(m);!o&&g?o=g:a===-1&&(a=e+p)}}a!==-1&&n(a,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,c="",f=i.length;for(let p=1;p<t.length;++p){let m=t[p];switch(m.type){case"space":l=!0;case"newline":f+=m.source.length;break;case"comment":s&&!l&&n(m,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=m.source.length,c=m.source.substring(1);break;case"error":n(m,"UNEXPECTED_TOKEN",m.message),f+=m.source.length;break;default:{let g=`Unexpected token in block scalar header: ${m.type}`;n(m,"UNEXPECTED_TOKEN",g);let h=m.source;h&&typeof h=="string"&&(f+=h.length)}}}return{mode:r,indent:o,chomp:u,comment:c,length:f}}function co(e){let t=e.split(/\n( *)/),s=t[0],n=s.match(/^( *)/),r=[n?.[1]?[n[1],s.slice(n[1].length)]:["",s]];for(let o=1;o<t.length;o+=2)r.push([t[o],t[o+1]]);return r}function Rs(e,t,s){let{offset:n,type:i,source:r,end:o}=e,u,a,l=(p,m,g)=>s(n+p,m,g);switch(i){case"scalar":u=y.PLAIN,a=fo(r,l);break;case"single-quoted-scalar":u=y.QUOTE_SINGLE,a=po(r,l);break;case"double-quoted-scalar":u=y.QUOTE_DOUBLE,a=ho(r,l);break;default:return s(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+r.length,n+r.length]}}let c=n+r.length,f=fe(o,c,t,s);return{value:a,type:u,comment:f.comment,range:[n,c,f.offset]}}function fo(e,t){let s="";switch(e[0]){case"	":s="a tab character";break;case",":s="flow indicator character ,";break;case"%":s="directive indicator character %";break;case"|":case">":{s=`block scalar indicator ${e[0]}`;break}case"@":case"`":{s=`reserved character ${e[0]}`;break}}return s&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${s}`),gi(e)}function po(e,t){return(e[e.length-1]!=="'"||e.length===1)&&t(e.length,"MISSING_CHAR","Missing closing 'quote"),gi(e.slice(1,-1)).replace(/''/g,"'")}function gi(e){let t,s;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),s=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,s=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=t.exec(e);if(!n)return e;let i=n[1],r=" ",o=t.lastIndex;for(s.lastIndex=o;n=s.exec(e);)n[1]===""?r===`
`?i+=r:r=`
`:(i+=r+n[1],r=" "),o=s.lastIndex;let u=/[ \t]*(.*)/sy;return u.lastIndex=o,n=u.exec(e),i+r+(n?.[1]??"")}function ho(e,t){let s="";for(let n=1;n<e.length-1;++n){let i=e[n];if(!(i==="\r"&&e[n+1]===`
`))if(i===`
`){let{fold:r,offset:o}=mo(e,n);s+=r,n=o}else if(i==="\\"){let r=e[++n],o=Do[r];if(o)s+=o;else if(r===`
`)for(r=e[n+1];r===" "||r==="	";)r=e[++n+1];else if(r==="\r"&&e[n+1]===`
`)for(r=e[++n+1];r===" "||r==="	";)r=e[++n+1];else if(r==="x"||r==="u"||r==="U"){let u={x:2,u:4,U:8}[r];s+=go(e,n+1,u,t),n+=u}else{let u=e.substr(n-1,2);t(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${u}`),s+=u}}else if(i===" "||i==="	"){let r=n,o=e[n+1];for(;o===" "||o==="	";)o=e[++n+1];o!==`
`&&!(o==="\r"&&e[n+2]===`
`)&&(s+=n>r?e.slice(r,n+1):i)}else s+=i}return(e[e.length-1]!=='"'||e.length===1)&&t(e.length,"MISSING_CHAR",'Missing closing "quote'),s}function mo(e,t){let s="",n=e[t+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&e[t+2]!==`
`);)n===`
`&&(s+=`
`),t+=1,n=e[t+1];return s||(s=" "),{fold:s,offset:t}}var Do={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function go(e,t,s,n){let i=e.substr(t,s),o=i.length===s&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){let u=e.substr(t-2,s+2);return n(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${u}`),u}return String.fromCodePoint(o)}function _s(e,t,s,n){let{value:i,type:r,comment:o,range:u}=t.type==="block-scalar"?Ps(e,t,n):Rs(t,e.options.strict,n),a=s?e.directives.tagName(s.source,f=>n(s,"TAG_RESOLVE_FAILED",f)):null,l;e.options.stringKeys&&e.atKey?l=e.schema[U]:a?l=yo(e.schema,i,a,s,n):t.type==="scalar"?l=bo(e,i,t,n):l=e.schema[U];let c;try{let f=l.resolve(i,p=>n(s??t,"TAG_RESOLVE_FAILED",p),e.options);c=S(f)?f:new y(f)}catch(f){let p=f instanceof Error?f.message:String(f);n(s??t,"TAG_RESOLVE_FAILED",p),c=new y(i)}return c.range=u,c.source=i,r&&(c.type=r),a&&(c.tag=a),l.format&&(c.format=l.format),o&&(c.comment=o),c}function yo(e,t,s,n,i){if(s==="!")return e[U];let r=[];for(let u of e.tags)if(!u.collection&&u.tag===s)if(u.default&&u.test)r.push(u);else return u;for(let u of r)if(u.test?.test(t))return u;let o=e.knownTags[s];return o&&!o.collection?(e.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,s!=="tag:yaml.org,2002:str"),e[U])}function bo({atKey:e,directives:t,schema:s},n,i,r){let o=s.tags.find(u=>(u.default===!0||e&&u.default==="key")&&u.test?.test(n))||s[U];if(s.compat){let u=s.compat.find(a=>a.default&&a.test?.test(n))??s[U];if(o.tag!==u.tag){let a=t.tagString(o.tag),l=t.tagString(u.tag),c=`Value may be parsed as either ${a} or ${l}`;r(i,"TAG_RESOLVE_FAILED",c,!0)}}return o}function yi(e,t,s){if(t){s??(s=t.length);for(let n=s-1;n>=0;--n){let i=t[n];switch(i.type){case"space":case"comment":case"newline":e-=i.source.length;continue}for(i=t[++n];i?.type==="space";)e+=i.source.length,i=t[++n];break}}return e}var Fo={composeNode:js,composeEmptyNode:Yt};function js(e,t,s,n){let i=e.atKey,{spaceBefore:r,comment:o,anchor:u,tag:a}=s,l,c=!0;switch(t.type){case"alias":l=wo(e,t,n),(u||a)&&n(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=_s(e,t,a,n),u&&(l.anchor=u.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=Di(Fo,e,t,s,n),u&&(l.anchor=u.source.substring(1));break;default:{let f=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;n(t,"UNEXPECTED_TOKEN",f),l=Yt(e,t.offset,void 0,null,s,n),c=!1}}return u&&l.anchor===""&&n(u,"BAD_ALIAS","Anchor cannot be an empty string"),i&&e.options.stringKeys&&(!S(l)||typeof l.value!="string"||l.tag&&l.tag!=="tag:yaml.org,2002:str")&&n(a??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),r&&(l.spaceBefore=!0),o&&(t.type==="scalar"&&t.source===""?l.comment=o:l.commentBefore=o),e.options.keepSourceTokens&&c&&(l.srcToken=t),l}function Yt(e,t,s,n,{spaceBefore:i,comment:r,anchor:o,tag:u,end:a},l){let c={type:"scalar",offset:yi(t,s,n),indent:-1,source:""},f=_s(e,c,u,l);return o&&(f.anchor=o.source.substring(1),f.anchor===""&&l(o,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(f.spaceBefore=!0),r&&(f.comment=r,f.range[2]=a),f}function wo({options:e},{offset:t,source:s,end:n},i){let r=new he(s.substring(1));r.source===""&&i(t,"BAD_ALIAS","Alias cannot be an empty string"),r.source.endsWith(":")&&i(t+s.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let o=t+s.length,u=fe(n,o,e.strict,i);return r.range=[t,o,u.offset],u.comment&&(r.comment=u.comment),r}function bi(e,t,{offset:s,start:n,value:i,end:r},o){let u=Object.assign({_directives:t},e),a=new ke(void 0,u),l={atKey:!1,atRoot:!0,directives:a.directives,options:a.options,schema:a.schema},c=ce(n,{indicator:"doc-start",next:i??r?.[0],offset:s,onError:o,parentIndent:0,startOnNewline:!0});c.found&&(a.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!c.hasNewline&&o(c.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),a.contents=i?js(l,i,c,o):Yt(l,c.end,n,null,c,o);let f=a.contents.range[2],p=fe(r,f,!1,o);return p.comment&&(a.comment=p.comment),a.range=[s,f,p.offset],a}function at(e){if(typeof e=="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];let{offset:t,source:s}=e;return[t,t+(typeof s=="string"?s.length:1)]}function Fi(e){let t="",s=!1,n=!1;for(let i=0;i<e.length;++i){let r=e[i];switch(r[0]){case"#":t+=(t===""?"":n?`

`:`
`)+(r.substring(1)||" "),s=!0,n=!1;break;case"%":e[i+1]?.[0]!=="#"&&(i+=1),s=!1;break;default:s||(n=!0),s=!1}}return{comment:t,afterEmptyLine:n}}var lt=class{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(s,n,i,r)=>{let o=at(s);r?this.warnings.push(new ot(o,n,i)):this.errors.push(new ee(o,n,i))},this.directives=new ae({version:t.version||"1.2"}),this.options=t}decorate(t,s){let{comment:n,afterEmptyLine:i}=Fi(this.prelude);if(n){let r=t.contents;if(s)t.comment=t.comment?`${t.comment}
${n}`:n;else if(i||t.directives.docStart||!r)t.commentBefore=n;else if(N(r)&&!r.flow&&r.items.length>0){let o=r.items[0];B(o)&&(o=o.key);let u=o.commentBefore;o.commentBefore=u?`${n}
${u}`:n}else{let o=r.commentBefore;r.commentBefore=o?`${n}
${o}`:n}}s?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Fi(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,s=!1,n=-1){for(let i of t)yield*this.next(i);yield*this.end(s,n)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(s,n,i)=>{let r=at(t);r[0]+=s,this.onError(r,"BAD_DIRECTIVE",n,i)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{let s=bi(this.options,this.directives,t,this.onError);this.atDirectives&&!s.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(s,!1),this.doc&&(yield this.doc),this.doc=s,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{let s=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new ee(at(t),"UNEXPECTED_TOKEN",s);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){let n="Unexpected doc-end without preceding document";this.errors.push(new ee(at(t),"UNEXPECTED_TOKEN",n));break}this.doc.directives.docEnd=!0;let s=fe(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),s.comment){let n=this.doc.comment;this.doc.comment=n?`${n}
${s.comment}`:s.comment}this.doc.range[2]=s.offset;break}default:this.errors.push(new ee(at(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,s=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){let n=Object.assign({_directives:this.directives},this.options),i=new ke(void 0,n);this.atDirectives&&this.onError(s,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,s,s],this.decorate(i,!1),yield i}}};var Ms=Symbol("break visit"),Eo=Symbol("skip children"),wi=Symbol("remove item");function $e(e,t){"type"in e&&e.type==="document"&&(e={start:e.start,value:e.value}),Ei(Object.freeze([]),e,t)}$e.BREAK=Ms;$e.SKIP=Eo;$e.REMOVE=wi;$e.itemAtPath=(e,t)=>{let s=e;for(let[n,i]of t){let r=s?.[n];if(r&&"items"in r)s=r.items[i];else return}return s};$e.parentCollection=(e,t)=>{let s=$e.itemAtPath(e,t.slice(0,-1)),n=t[t.length-1][0],i=s?.[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function Ei(e,t,s){let n=s(t,e);if(typeof n=="symbol")return n;for(let i of["key","value"]){let r=t[i];if(r&&"items"in r){for(let o=0;o<r.items.length;++o){let u=Ei(Object.freeze(e.concat([[i,o]])),r.items[o],s);if(typeof u=="number")o=u-1;else{if(u===Ms)return Ms;u===wi&&(r.items.splice(o,1),o-=1)}}typeof n=="function"&&i==="key"&&(n=n(t,e))}}return typeof n=="function"?n(t,e):n}var qs="\uFEFF",Ks="",Vs="",Jt="";function Ci(e){switch(e){case qs:return"byte-order-mark";case Ks:return"doc-mode";case Vs:return"flow-error-end";case Jt:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function te(e){switch(e){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var ki=new Set("0123456789ABCDEFabcdef"),ko=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Qt=new Set(",[]{}"),Ao=new Set(` ,[]{}
\r	`),Us=e=>!e||Ao.has(e),ct=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,s=!1){if(t){if(typeof t!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!s;let n=this.next??"stream";for(;n&&(s||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let t=this.pos,s=this.buffer[t];for(;s===" "||s==="	";)s=this.buffer[++t];return!s||s==="#"||s===`
`?!0:s==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let s=this.buffer[t];if(this.indentNext>0){let n=0;for(;s===" ";)s=this.buffer[++n+t];if(s==="\r"){let i=this.buffer[n+t+1];if(i===`
`||!i&&!this.atEnd)return t+n+1}return s===`
`||n>=this.indentNext||!s&&!this.atEnd?t+n:-1}if(s==="-"||s==="."){let n=this.buffer.substr(t,3);if((n==="---"||n==="...")&&te(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===qs&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let s=t.length,n=t.indexOf("#");for(;n!==-1;){let r=t[n-1];if(r===" "||r==="	"){s=n-1;break}else n=t.indexOf("#",n+1)}for(;;){let r=t[s-1];if(r===" "||r==="	")s-=1;else break}let i=(yield*this.pushCount(s))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){let s=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-s),yield*this.pushNewline(),"stream"}return yield Ks,yield*this.parseLineStart()}*parseLineStart(){let t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let s=this.peek(3);if((s==="---"||s==="...")&&te(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,s==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!te(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[t,s]=this.peek(2);if(!s&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&te(s)){let n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let t=this.getLine();if(t===null)return this.setNext("doc");let s=yield*this.pushIndicators();switch(t[s]){case"#":yield*this.pushCount(t.length-s);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Us),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return s+=yield*this.parseBlockScalarHeader(),s+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-s),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,s,n=-1;do t=yield*this.pushNewline(),t>0?(s=yield*this.pushSpaces(!1),this.indentValue=n=s):s=0,s+=yield*this.pushSpaces(!0);while(t+s>0);let i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&te(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield Vs,yield*this.parseLineStart();let r=0;for(;i[r]===",";)r+=yield*this.pushCount(1),r+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(r+=yield*this.pushIndicators(),i[r]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Us),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let o=this.charAt(1);if(this.flowKey||te(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let t=this.charAt(0),s=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;s!==-1&&this.buffer[s+1]==="'";)s=this.buffer.indexOf("'",s+2);else for(;s!==-1;){let r=0;for(;this.buffer[s-1-r]==="\\";)r+=1;if(r%2===0)break;s=this.buffer.indexOf('"',s+1)}let n=this.buffer.substring(0,s),i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){let r=this.continueScalar(i+1);if(r===-1)break;i=n.indexOf(`
`,r)}i!==-1&&(s=i-(n[i-1]==="\r"?2:1))}if(s===-1){if(!this.atEnd)return this.setNext("quoted-scalar");s=this.buffer.length}return yield*this.pushToIndex(s+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){let s=this.buffer[++t];if(s==="+")this.blockScalarKeep=!0;else if(s>"0"&&s<="9")this.blockScalarIndent=Number(s)-1;else if(s!=="-")break}return yield*this.pushUntil(s=>te(s)||s==="#")}*parseBlockScalar(){let t=this.pos-1,s=0,n;e:for(let r=this.pos;n=this.buffer[r];++r)switch(n){case" ":s+=1;break;case`
`:t=r,s=0;break;case"\r":{let o=this.buffer[r+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(s>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=s:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{let r=this.continueScalar(t+1);if(r===-1)break;t=this.buffer.indexOf(`
`,r)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let i=t+1;for(n=this.buffer[i];n===" ";)n=this.buffer[++i];if(n==="	"){for(;n==="	"||n===" "||n==="\r"||n===`
`;)n=this.buffer[++i];t=i-1}else if(!this.blockScalarKeep)do{let r=t-1,o=this.buffer[r];o==="\r"&&(o=this.buffer[--r]);let u=r;for(;o===" ";)o=this.buffer[--r];if(o===`
`&&r>=this.pos&&r+1+s>u)t=r;else break}while(!0);return yield Jt,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let t=this.flowLevel>0,s=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){let r=this.buffer[n+1];if(te(r)||t&&Qt.has(r))break;s=n}else if(te(i)){let r=this.buffer[n+1];if(i==="\r"&&(r===`
`?(n+=1,i=`
`,r=this.buffer[n+1]):s=n),r==="#"||t&&Qt.has(r))break;if(i===`
`){let o=this.continueScalar(n+1);if(o===-1)break;n=Math.max(n,o-2)}}else{if(t&&Qt.has(i))break;s=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Jt,yield*this.pushToIndex(s+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,s){let n=this.buffer.slice(this.pos,t);return n?(yield n,this.pos+=n.length,n.length):(s&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Us))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let t=this.flowLevel>0,s=this.charAt(1);if(te(s)||t&&Qt.has(s))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,s=this.buffer[t];for(;!te(s)&&s!==">";)s=this.buffer[++t];return yield*this.pushToIndex(s===">"?t+1:t,!1)}else{let t=this.pos+1,s=this.buffer[t];for(;s;)if(ko.has(s))s=this.buffer[++t];else if(s==="%"&&ki.has(this.buffer[t+1])&&ki.has(this.buffer[t+2]))s=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){let t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(1):t==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let s=this.pos-1,n;do n=this.buffer[++s];while(n===" "||t&&n==="	");let i=s-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=s),i}*pushUntil(t){let s=this.pos,n=this.buffer[s];for(;!t(n);)n=this.buffer[++s];return yield*this.pushToIndex(s,!1)}};var ft=class{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let s=0,n=this.lineStarts.length;for(;s<n;){let r=s+n>>1;this.lineStarts[r]<t?s=r+1:n=r}if(this.lineStarts[s]===t)return{line:s+1,col:1};if(s===0)return{line:0,col:t};let i=this.lineStarts[s-1];return{line:s,col:t-i+1}}}};function Se(e,t){for(let s=0;s<e.length;++s)if(e[s].type===t)return!0;return!1}function Ai(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function vi(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function zt(e){switch(e.type){case"document":return e.start;case"block-map":{let t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function qe(e){if(e.length===0)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;e[++t]?.type==="space";);return e.splice(t,e.length)}function Si(e){if(e.start.type==="flow-seq-start")for(let t of e.items)t.sep&&!t.value&&!Se(t.start,"explicit-key-ind")&&!Se(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,vi(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}var pt=class{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new ct,this.onNewLine=t}*parse(t,s=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let n of this.lexer.lex(t,s))yield*this.next(n);s||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}let s=Ci(t);if(s)if(s==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=s,yield*this.step(),s){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{let n=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let t=this.peek(1);if(this.type==="doc-end"&&t?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){let s=t??this.stack.pop();if(!s)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield s;else{let n=this.peek(1);switch(s.type==="block-scalar"?s.indent="indent"in n?n.indent:0:s.type==="flow-collection"&&n.type==="document"&&(s.indent=0),s.type==="flow-collection"&&Si(s),n.type){case"document":n.value=s;break;case"block-scalar":n.props.push(s);break;case"block-map":{let i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:s,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=s;else{Object.assign(i,{key:s,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{let i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:s}):i.value=s;break}case"flow-collection":{let i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:s,sep:[]}):i.sep?i.value=s:Object.assign(i,{key:s,sep:[]});return}default:yield*this.pop(),yield*this.pop(s)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(s.type==="block-map"||s.type==="block-seq")){let i=s.items[s.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&Ai(i.start)===-1&&(s.indent===0||i.start.every(r=>r.type!=="comment"||r.indent<s.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),s.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{Ai(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}let s=this.startBlockValue(t);s?this.stack.push(s):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){let s=zt(this.peek(2)),n=qe(s),i;t.end?(i=t.end,i.push(this.sourceToken),delete t.end):i=[this.sourceToken];let r={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let s=this.source.indexOf(`
`)+1;for(;s!==0;)this.onNewLine(this.offset+s),s=this.source.indexOf(`
`,s)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){let s=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,s.value){let n="end"in s.value?s.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else s.sep?s.sep.push(this.sourceToken):s.start.push(this.sourceToken);return;case"space":case"comment":if(s.value)t.items.push({start:[this.sourceToken]});else if(s.sep)s.sep.push(this.sourceToken);else{if(this.atIndentedComment(s.start,t.indent)){let i=t.items[t.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,s.start),i.push(this.sourceToken),t.items.pop();return}}s.start.push(this.sourceToken)}return}if(this.indent>=t.indent){let n=!this.onKeyLine&&this.indent===t.indent,i=n&&(s.sep||s.explicitKey)&&this.type!=="seq-item-ind",r=[];if(i&&s.sep&&!s.value){let o=[];for(let u=0;u<s.sep.length;++u){let a=s.sep[u];switch(a.type){case"newline":o.push(u);break;case"space":break;case"comment":a.indent>t.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(r=s.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":i||s.value?(r.push(this.sourceToken),t.items.push({start:r}),this.onKeyLine=!0):s.sep?s.sep.push(this.sourceToken):s.start.push(this.sourceToken);return;case"explicit-key-ind":!s.sep&&!s.explicitKey?(s.start.push(this.sourceToken),s.explicitKey=!0):i||s.value?(r.push(this.sourceToken),t.items.push({start:r,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(s.explicitKey)if(s.sep)if(s.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Se(s.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]});else if(vi(s.key)&&!Se(s.sep,"newline")){let o=qe(s.start),u=s.key,a=s.sep;a.push(this.sourceToken),delete s.key,delete s.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:u,sep:a}]})}else r.length>0?s.sep=s.sep.concat(r,this.sourceToken):s.sep.push(this.sourceToken);else if(Se(s.start,"newline"))Object.assign(s,{key:null,sep:[this.sourceToken]});else{let o=qe(s.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else s.sep?s.value||i?t.items.push({start:r,key:null,sep:[this.sourceToken]}):Se(s.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):s.sep.push(this.sourceToken):Object.assign(s,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);i||s.value?(t.items.push({start:r,key:o,sep:[]}),this.onKeyLine=!0):s.sep?this.stack.push(o):(Object.assign(s,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(t);if(o){if(o.type==="block-seq"){if(!s.explicitKey&&s.sep&&!Se(s.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else n&&t.items.push({start:r});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){let s=t.items[t.items.length-1];switch(this.type){case"newline":if(s.value){let n="end"in s.value?s.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else s.start.push(this.sourceToken);return;case"space":case"comment":if(s.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(s.start,t.indent)){let i=t.items[t.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,s.start),i.push(this.sourceToken),t.items.pop();return}}s.start.push(this.sourceToken)}return;case"anchor":case"tag":if(s.value||this.indent<=t.indent)break;s.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;s.value||Se(s.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):s.start.push(this.sourceToken);return}if(this.indent>t.indent){let n=this.startBlockValue(t);if(n){this.stack.push(n);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){let s=t.items[t.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n?.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!s||s.sep?t.items.push({start:[this.sourceToken]}):s.start.push(this.sourceToken);return;case"map-value-ind":!s||s.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):s.sep?s.sep.push(this.sourceToken):Object.assign(s,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!s||s.value?t.items.push({start:[this.sourceToken]}):s.sep?s.sep.push(this.sourceToken):s.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);!s||s.value?t.items.push({start:[],key:i,sep:[]}):s.sep?this.stack.push(i):Object.assign(s,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}let n=this.startBlockValue(t);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"&&n.indent===t.indent||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){let i=zt(n),r=qe(i);Si(t);let o=t.end.splice(1,t.end.length);o.push(this.sourceToken);let u={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:r,key:t,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=u}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let s=this.source.indexOf(`
`)+1;for(;s!==0;)this.onNewLine(this.offset+s),s=this.source.indexOf(`
`,s)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let s=zt(t),n=qe(s);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;let s=zt(t),n=qe(s);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,s){return this.type!=="comment"||this.indent<=s?!1:t.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};function So(e){let t=e.prettyErrors!==!1;return{lineCounter:e.lineCounter||t&&new ft||null,prettyErrors:t}}function Bi(e,t={}){let{lineCounter:s,prettyErrors:n}=So(t),i=new pt(s?.addNewLine),r=new lt(t),o=null;for(let u of r.compose(i.parse(e),!0,e.length))if(!o)o=u;else if(o.options.logLevel!=="silent"){o.errors.push(new ee(u.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&s&&(o.errors.forEach(Ts(e,s)),o.warnings.forEach(Ts(e,s))),o}function Ke(e,t,s){let n;typeof t=="function"?n=t:s===void 0&&t&&typeof t=="object"&&(s=t);let i=Bi(e,s);if(!i)return null;if(i.warnings.forEach(r=>$t(i.options.logLevel,r)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},s))}var Gs=class{value;next;constructor(t){this.value=t}},ht=class{#e;#t;#s;constructor(){this.clear()}enqueue(t){let s=new Gs(t);this.#e?(this.#t.next=s,this.#t=s):(this.#e=s,this.#t=s),this.#s++}dequeue(){let t=this.#e;if(t)return this.#e=this.#e.next,this.#s--,this.#e||(this.#t=void 0),t.value}peek(){if(this.#e)return this.#e.value}clear(){this.#e=void 0,this.#t=void 0,this.#s=0}get size(){return this.#s}*[Symbol.iterator](){let t=this.#e;for(;t;)yield t.value,t=t.next}*drain(){for(;this.#e;)yield this.dequeue()}};function Ws(e){$i(e);let t=new ht,s=0,n=()=>{s<e&&t.size>0&&(s++,t.dequeue()())},i=()=>{s--,n()},r=async(a,l,c)=>{let f=(async()=>a(...c))();l(f);try{await f}catch{}i()},o=(a,l,c)=>{new Promise(f=>{t.enqueue(f)}).then(r.bind(void 0,a,l,c)),s<e&&n()},u=(a,...l)=>new Promise(c=>{o(a,c,l)});return Object.defineProperties(u,{activeCount:{get:()=>s},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}},concurrency:{get:()=>e,set(a){$i(a),e=a,queueMicrotask(()=>{for(;s<e&&t.size>0;)n()})}},map:{async value(a,l){let c=Array.from(a,(f,p)=>this(l,f,p));return Promise.all(c)}}}),u}function $i(e){if(!((Number.isInteger(e)||e===Number.POSITIVE_INFINITY)&&e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}var De="https://api.github.com",$o="https://api.github.com/graphql",Ve=class{token;limiter;owner;repo;constructor(t,s=10,n,i){this.token=t||process.env.GITHUB_TOKEN||"",this.limiter=Ws(s),this.owner=n,this.repo=i}getToken(){return this.token}getOwner(){return this.owner}getRepo(){return this.repo}async resolveRef(t,s,n){if(/^[a-f0-9]{40}$/i.test(n))return n;let i=[()=>this.resolveTag(t,s,n),()=>this.resolveBranch(t,s,n)];for(let r of i)try{return await r()}catch(o){if(o instanceof Error&&o.message.includes("rate limit"))throw o}throw new Error(`Could not resolve ref "${n}" for ${t}/${s}`)}async resolveTag(t,s,n){let i=`${De}/repos/${t}/${s}/git/refs/tags/${n}`,r=await this.get(i);if(r.object.type==="tag"){let o=`${De}/repos/${t}/${s}/git/tags/${r.object.sha}`;return(await this.get(o)).object.sha}return r.object.sha}async resolveBranch(t,s,n){let i=`${De}/repos/${t}/${s}/git/refs/heads/${n}`;return(await this.get(i)).object.sha}async getActionConfig(t,s,n,i){if(i?.endsWith(".yml")||i?.endsWith(".yaml"))try{let r=`${De}/repos/${t}/${s}/contents/${i}?ref=${n}`,o=await this.get(r);if(!o.download_url)return null;let a=await(await this.fetch(o.download_url)).text();return Ke(a)}catch{return null}for(let r of["action.yml","action.yaml"]){let o=i?`${i}/${r}`:r;try{let u=`${De}/repos/${t}/${s}/contents/${o}?ref=${n}`,a=await this.get(u);if(!a.download_url)continue;let c=await(await this.fetch(a.download_url)).text();return Ke(c)}catch{}}return null}async getArchiveSHA256(t,s,n){let i=`${De}/repos/${t}/${s}/tarball/${n}`,r=await this.fetch(i);if(!r.ok)throw new Error(`Failed to download tarball: ${r.status}`);let o=await r.arrayBuffer(),u=Bo("sha256");return u.update(Buffer.from(o)),`sha256-${u.digest("hex")}`}async get(t){let s=await this.fetch(t);if(s.status===404)throw new Error("Not found");if(s.status===403){let n=await s.text();throw n.includes("rate limit")||n.includes("API rate limit")?new Error("GitHub API rate limit exceeded. Set the GITHUB_TOKEN environment variable to authenticate and increase your rate limit."):new Error(`Request failed: ${s.status}: ${n}`)}if(!s.ok){let n=await s.text();throw new Error(`Request failed: ${s.status}: ${n}`)}return s.json()}async fetch(t){let s={Accept:"application/vnd.github+json"};return this.token&&(s.Authorization=`Bearer ${this.token}`),this.limiter(()=>fetch(t,{headers:s}))}async post(t,s,n="POST"){let i={Accept:"application/vnd.github+json","Content-Type":"application/json"};this.token&&(i.Authorization=`Bearer ${this.token}`);let r={method:n,headers:i};return s!==void 0&&(r.body=JSON.stringify(s)),this.limiter(()=>fetch(t,r))}async graphql(t,s){let n=await this.post($o,{query:t,variables:s});if(!n.ok)throw new Error(`GraphQL request failed: ${n.status}`);let i=await n.json();if(i.errors&&i.errors.length>0){let r=i.errors[0];throw new Error(r.message)}if(!i.data)throw new Error("GraphQL response missing data");return i.data}async findPRComment(t,s){if(!this.owner||!this.repo)throw new Error("Repository context not available (GITHUB_REPOSITORY not set)");let n=`${De}/repos/${this.owner}/${this.repo}/issues/${t}/comments`,i=await this.get(n);for(let r of i)if(r.body.includes(s))return r;return null}async createPRComment(t,s){if(!this.owner||!this.repo)throw new Error("Repository context not available (GITHUB_REPOSITORY not set)");let n=`${De}/repos/${this.owner}/${this.repo}/issues/${t}/comments`,i=await this.post(n,{body:s});if(!i.ok){let r=await i.text();throw new Error(`Failed to create comment: ${i.status} ${r}`)}}async updatePRComment(t,s){if(!this.owner||!this.repo)throw new Error("Repository context not available (GITHUB_REPOSITORY not set)");let n=`${De}/repos/${this.owner}/${this.repo}/issues/comments/${t}`,i=await this.post(n,{body:s},"PATCH");if(!i.ok){let r=await i.text();throw new Error(`Failed to update comment: ${i.status} ${r}`)}}async checkActionAdvisories(t){return((await this.graphql(`
      query($package: String!) {
        securityVulnerabilities(
          ecosystem: ACTIONS,
          package: $package,
          first: 10
        ) {
          nodes {
            advisory {
              ghsaId
              summary
              severity
              permalink
            }
            vulnerableVersionRange
          }
        }
      }
    `,{package:t})).securityVulnerabilities?.nodes||[]).map(r=>({ghsaId:r.advisory.ghsaId,severity:r.advisory.severity,summary:r.advisory.summary,vulnerableVersionRange:r.vulnerableVersionRange,permalink:r.advisory.permalink}))}};import{mkdir as jo,readFile as Mo,writeFile as qo,access as Ko}from"node:fs/promises";import{dirname as Vo}from"node:path";import{glob as Lo,readFile as Io}from"node:fs/promises";import{join as xo}from"node:path";var G=rr(Ti(),1),d={success:e=>G.default.green(e),error:e=>G.default.red(e),warning:e=>G.default.yellow(e),info:e=>G.default.cyan(e),dim:e=>G.default.dim(e),bold:e=>G.default.bold(e),critical:e=>G.default.red(G.default.bold(e)),high:e=>G.default.red(e),moderate:e=>G.default.yellow(G.default.bold(e)),low:e=>G.default.yellow(e)};var Po=/^([^/]+)\/([^/@]+)(?:\/([^@]+))?@(.+)$/,Ro=/^[a-f0-9]{40}$/i;function Ue(e){return e.startsWith("./")||e.startsWith("docker://")}async function es(e){let t=[];for await(let n of Lo(xo(e,"*.{yml,yaml}")))t.push(n);return(await Promise.all(t.map(_o))).filter(n=>n!==null)}async function _o(e){let t=await Io(e,"utf-8");try{return Ke(t)}catch(s){return console.error(d.error(`Failed to parse ${d.dim(e)}:`),s),null}}function ts(e){let t=new Set,s=[];for(let n of e)if(n.jobs)for(let i of Object.values(n.jobs)){if(i.uses&&!Ue(i.uses)&&!t.has(i.uses)){t.add(i.uses);let r=se(i.uses);r&&s.push(r)}if(i.steps)for(let r of i.steps){if(!r.uses||Ue(r.uses)||t.has(r.uses))continue;t.add(r.uses);let o=se(r.uses);o&&s.push(o)}}return s}function se(e){let t=Po.exec(e);if(!t)return console.warn(d.warning(`Invalid action reference format: ${d.dim(e)}`)),null;let[,s,n,i,r]=t;return{owner:s,repo:n,ref:r,path:i||void 0,rawUses:e}}function ne(e){return e.path?`${e.owner}/${e.repo}/${e.path}`:`${e.owner}/${e.repo}`}function Li(e){return Ro.test(e)}var Ii=".github/actions.lock.json";async function ss(e){try{await Ko(e)}catch{throw new Error(`Lockfile not found: ${e}`)}let t=await Mo(e,"utf-8");return JSON.parse(t)}async function xi(e,t){let s=Vo(t);await jo(s,{recursive:!0});let n=`${JSON.stringify(e,null,2)}
`;await qo(t,n)}function Pi(e,t){let s={match:!0,newActions:[],changed:[],removed:[]},n=ts(e),i=new Map;for(let o of n){let u=ne(o);i.has(u)||i.set(u,new Set),i.get(u).add(o.ref)}for(let[o,u]of i){let a=t.actions[o]||[];for(let l of u)a.find(f=>f.version===l)||(s.newActions.push({action:o,newVersion:l}),s.match=!1)}let r=Uo(t);for(let{name:o,version:u}of r){let a=i.get(o);if(!a||!a.has(u)){let c=(t.actions[o]||[]).find(f=>f.version===u);c&&(s.removed.push({action:o,oldVersion:c.version,oldSha:c.sha}),s.match=!1)}}return s}function Uo(e){let t=new Set;for(let n of Object.values(e.actions))for(let i of n)for(let r of i.dependencies){let o=se(r.ref);o&&t.add(`${ne(o)}@${o.ref}`)}let s=[];for(let[n,i]of Object.entries(e.actions))for(let r of i){let o=`${n}@${r.version}`;t.has(o)||s.push({name:n,version:r.version})}return s}function Ri(e){if(e.match){console.log(d.success("Lockfile is up to date"));return}if(console.log(d.error(d.bold(`Lockfile mismatch detected
`))),e.newActions.length>0){console.log("New actions (not in lockfile):");for(let t of e.newActions)console.log(`  ${d.success("+")} ${d.bold(t.action)}${d.dim("@")}${d.info(t.newVersion??"")}`);console.log()}if(e.changed.length>0){console.log("Changed actions:");for(let t of e.changed)console.log(`  ${d.warning("~")} ${d.bold(t.action)}: ${d.dim(t.oldVersion??"")} -> ${d.info(t.newVersion??"")}`);console.log()}if(e.removed.length>0){console.log("Removed actions:");for(let t of e.removed)console.log(`  ${d.error("-")} ${d.bold(t.action)}${d.dim("@")}${t.oldVersion??""}`);console.log()}console.log(d.dim("Run 'gh-actions-lockfile generate' to update the lockfile"))}var Go=10,ns=class{client;visited=new Set;constructor(t){this.client=t}async resolveAll(t){let s={version:1,generated:new Date().toISOString(),actions:{}};for(let n of t)await this.resolveAction(n,s,0);return s}async resolveAction(t,s,n){if(n>Go)throw new Error("Max dependency depth exceeded");let i=ne(t);if(this.visited.has(t.rawUses))return;this.visited.add(t.rawUses),console.log(d.info(`Resolving ${d.bold(i)}${d.dim("@")}${t.ref}...`));let r=await this.client.resolveRef(t.owner,t.repo,t.ref),[o,u]=await Promise.all([this.client.getArchiveSHA256(t.owner,t.repo,r).catch(l=>(console.log(d.warning(`  Warning: could not compute integrity hash: ${l}`)),"")),this.findTransitiveDeps(t,r)]),a={version:t.ref,sha:r,integrity:o,dependencies:[]};for(let l of u){await this.resolveAction(l,s,n+1);let c=ne(l),f=s.actions[c]?.find(p=>p.version===l.ref);if(f){let p={ref:l.rawUses,sha:f.sha,integrity:f.integrity};a.dependencies.push(p)}}s.actions[i]||(s.actions[i]=[]),s.actions[i].push(a),console.log(d.success(`  Resolved to ${d.dim(r.slice(0,12))}`))}async findTransitiveDeps(t,s){let n=await this.client.getActionConfig(t.owner,t.repo,s,t.path);if(!n)return[];let i=[];if(n.runs?.using==="composite"){for(let r of n.runs.steps||[]){if(!r.uses||Ue(r.uses))continue;let o=se(r.uses);o&&i.push(o)}return i}if(n.jobs){for(let r of Object.values(n.jobs)){if(r.uses&&!Ue(r.uses)){let o=se(r.uses);o&&i.push(o)}if(r.steps)for(let o of r.steps){if(!o.uses||Ue(o.uses))continue;let u=se(o.uses);u&&i.push(u)}}return i}return[]}};import{stat as Wo}from"node:fs/promises";import{dirname as Ho,isAbsolute as Yo,join as _i}from"node:path";async function Ge(e){if(Yo(e)){if(await Ys(e))return e;throw new Error(`Workflow directory not found: ${e}`)}let t=process.cwd(),s=_i(t,e);if(await Ys(s))return s;let n=t;for(;;){if(s=_i(n,".github","workflows"),await Ys(s))return s;let i=Ho(n);if(i===n)break;n=i}throw new Error(`Workflow directory not found: ${e} (searched from ${t})`)}async function Ys(e){try{return(await Wo(e)).isDirectory()}catch{return!1}}var Jo=new Intl.PluralRules("en"),ge=(e,t,s)=>{let n=Jo.select(s)==="one"?e:t;return`${s} ${n}`};async function Mi(e){let t=await Ge(e.workflows);console.log(d.info(`Parsing workflows from ${d.dim(t)}...`));let s=await es(t);if(s.length===0)throw new Error(`No workflow files found in ${t}`);console.log(d.success(`Found ${ge("workflow file","workflow files",s.length)}
`));let n=ts(s);if(n.length===0){console.log(d.warning("No action references found in workflows"));return}if(console.log(d.success(`Found ${ge("unique action reference","unique action references",n.length)}
`)),e.requireSha){let a=n.filter(l=>!Li(l.ref));if(a.length>0){console.error(d.error(d.bold(`ERROR: --require-sha is enabled but found non-SHA refs:
`)));for(let l of a)console.error(`  ${d.error("\u2717")} ${d.bold(ne(l))}${d.dim("@")}${l.ref}`);console.error(d.dim(`
Use full commit SHAs for maximum security.`)),console.error(d.dim("Example: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11")),process.exit(1)}}let i=new Ve(e.token),o=await new ns(i).resolveAll(n),u=e.output;if(!zo(u)){let a=ji(ji(t));u=Qo(a,u)}await xi(o,u),console.log(d.success(`
Lockfile written to ${u}`)),console.log(`  ${ge("action","actions",Object.keys(o.actions).length)} locked`)}import{join as iu,dirname as Wi,isAbsolute as ru}from"node:path";var qi="<!-- gh-actions-lockfile-comment -->";async function Ki(e,t,s){let n=Xo(s),i=await e.findPRComment(t,qi);i?await e.updatePRComment(i.id,n):await e.createPRComment(t,n)}function Xo(e){let t=e.newActions.length+e.changed.length+e.removed.length,s=[qi,"## :lock: Actions Lockfile Mismatch","","The lockfile verification failed. Please run `gh-actions-lockfile generate` to update the lockfile.","","<details>",`<summary>View changes (${t} action${t!==1?"s":""} affected)</summary>`,""];if(e.newActions.length>0){s.push("### New Actions"),s.push("");for(let n of e.newActions){let i=tu(n.action);i?s.push(`- \`${n.action}@${n.newVersion}\` ([view repo](${i}))`):s.push(`- \`${n.action}@${n.newVersion}\``)}s.push("")}if(e.changed.length>0){s.push("### Changed Actions"),s.push("");for(let n of e.changed){let i=Zo(n);i?s.push(`- \`${n.action}\`: ${n.oldVersion} -> ${n.newVersion} ([compare](${i}))`):s.push(`- \`${n.action}\`: ${n.oldVersion} -> ${n.newVersion}`)}s.push("")}if(e.removed.length>0){s.push("### Removed Actions"),s.push("");for(let n of e.removed){let i=eu(n);i?s.push(`- \`${n.action}@${n.oldVersion}\` ([view commit](${i}))`):s.push(`- \`${n.action}@${n.oldVersion}\``)}s.push("")}return s.push("</details>"),s.join(`
`)}function Zo(e){if(!e.oldSha||!e.newSha)return null;let t=e.action.split("/");if(t.length<2)return null;let s=t[0],n=t[1];return`https://github.com/${s}/${n}/compare/${e.oldSha}...${e.newSha}`}function eu(e){if(!e.oldSha)return null;let t=e.action.split("/");if(t.length<2)return null;let s=t[0],n=t[1];return`https://github.com/${s}/${n}/commit/${e.oldSha}`}function tu(e){let t=e.split("/");if(t.length<2)return null;let s=t[0],n=t[1];return`https://github.com/${s}/${n}`}import{readFileSync as su}from"node:fs";function Vi(){let e=process.env.GITHUB_EVENT_PATH;if(!e)return null;try{let t=JSON.parse(su(e,"utf-8"));return t.pull_request?.number?t.pull_request.number:t.issue?.number?t.issue.number:t.number?t.number:null}catch{return null}}async function Ui(e,t){let s=[],n=0;if(!t.getToken())return console.log(d.warning(`Skipping advisory check (no token available for GraphQL API)
`)),{checked:0,actionsWithAdvisories:[],hasVulnerabilities:!1};console.log(d.info("Checking security advisories..."));for(let[r,o]of Object.entries(e.actions))for(let u of o)try{let a=await t.checkActionAdvisories(r);n++,a.length>0&&s.push({action:r,version:u.version,advisories:a})}catch(a){if(a instanceof Error&&a.message.includes("INSUFFICIENT_SCOPES"))return console.log(d.warning(`Skipping advisory check (token lacks required scopes)
`)),{checked:0,actionsWithAdvisories:[],hasVulnerabilities:!1}}return{checked:n,actionsWithAdvisories:s,hasVulnerabilities:s.length>0}}function nu(e){switch(e){case"CRITICAL":return d.critical("CRIT");case"HIGH":return d.high("HIGH");case"MODERATE":return d.moderate("MOD ");case"LOW":return d.low("LOW ");default:return d.dim(e)}}function Gi(e){if(e.checked!==0){if(console.log(),!e.hasVulnerabilities){console.log(`${d.success("\u2713")} No known vulnerabilities found (${e.checked} checked)`),console.log();return}console.log(d.error(d.bold(`Security advisories found:
`)));for(let t of e.actionsWithAdvisories)for(let s of t.advisories)console.log(`${nu(s.severity)} ${d.bold(t.action)}${d.dim("@")}${t.version}`),console.log(`     ${d.dim(s.ghsaId)}`),console.log(`     ${s.summary}`),console.log(`     ${d.dim(s.permalink)}`),console.log();console.log(d.error(`Found ${ge("action","actions",e.actionsWithAdvisories.length)} with known vulnerabilities
`))}}async function Hi(e){let t=await Ge(e.workflows),s=e.output;if(!ru(s)){let a=Wi(Wi(t));s=iu(a,s)}let n=await ss(s),i=await es(t);console.log(d.bold(`Verifying lockfile...
`));let r=Pi(i,n);Ri(r);let o=!r.match,u=new Ve(e.token);if(e.skipSha)console.log(d.warning(`Skipping SHA verification (--skip-sha)
`));else{let a=await au(n,u);lu(a),a.passed||(o=!0)}if(e.skipIntegrity)console.log(d.warning(`Skipping integrity verification (--skip-integrity)
`));else{let a=await ou(n,u);uu(a),a.passed||(o=!0)}if(e.skipAdvisories)console.log(d.warning(`Skipping security advisory check (--skip-advisories)
`));else{let a=await Ui(n,u);Gi(a),a.hasVulnerabilities&&(o=!0)}o&&(e.comment&&await cu(u,r),process.exit(1)),console.log(d.success(d.bold("Lockfile verification passed")))}async function ou(e,t){let s=[],n=0,i=[];for(let[o,u]of Object.entries(e.actions))for(let a of u)a.integrity&&i.push({name:o,version:a.version,sha:a.sha,integrity:a.integrity});if(i.length===0)return{passed:!0,checked:0,failures:[]};console.log(d.info(`Checking integrity of ${ge("action","actions",i.length)}...`));let r=await Promise.all(i.map(async o=>{let u=o.name.split("/"),a=u[0],l=u[1];try{let c=await t.getArchiveSHA256(a,l,o.sha);return c!==o.integrity?(console.log(`${d.error("\u2717")} ${d.bold(o.name)}${d.dim("@")}${o.version}`),{checked:!0,failure:{action:o.name,version:o.version,expected:o.integrity,actual:c}}):(console.log(`${d.success("\u2713")} ${d.bold(o.name)}${d.dim("@")}${o.version}`),{checked:!0,failure:null})}catch(c){return console.log(`${d.warning("\u26A0")} ${d.bold(o.name)}${d.dim("@")}${o.version} - ${d.dim(`could not verify: ${c instanceof Error?c.message:c}`)}`),{checked:!1,failure:null}}}));for(let o of r)o.checked&&n++,o.failure&&s.push(o.failure);return{passed:s.length===0,checked:n,failures:s}}function uu(e){if(e.checked===0){console.log(d.dim(`No integrity hashes to verify
`));return}if(e.passed)console.log(d.success(`All integrity checks passed (${e.checked} verified)
`));else{console.log(d.error(d.bold(`INTEGRITY VERIFICATION FAILED
`)));for(let t of e.failures)console.log(`  ${d.bold(t.action)}${d.dim("@")}${t.version}`),console.log(`    ${d.dim("Expected:")} ${t.expected}`),console.log(`    ${d.dim("Got:")}      ${d.error(t.actual)}`);console.log()}}async function au(e,t){let s=[],n=0,i=[];for(let[o,u]of Object.entries(e.actions))for(let a of u)if(i.push({name:o,version:a.version,sha:a.sha}),a.dependencies)for(let l of a.dependencies){let c=l.ref.lastIndexOf("@");if(c===-1)continue;let f=l.ref.slice(0,c),p=l.ref.slice(c+1);i.push({name:f,version:p,sha:l.sha})}if(i.length===0)return{passed:!0,checked:0,failures:[]};console.log(d.info(`Checking SHA resolution for ${ge("action","actions",i.length)}...`));let r=await Promise.all(i.map(async o=>{let u=o.name.split("/"),a=u[0],l=u[1];try{let c=await t.resolveRef(a,l,o.version);return c!==o.sha?(console.log(`${d.error("\u2717")} ${d.bold(o.name)}${d.dim("@")}${o.version}`),{checked:!0,failure:{action:o.name,version:o.version,lockfileSha:o.sha,remoteSha:c}}):(console.log(`${d.success("\u2713")} ${d.bold(o.name)}${d.dim("@")}${o.version}`),{checked:!0,failure:null})}catch(c){return console.log(`${d.warning("\u26A0")} ${d.bold(o.name)}${d.dim("@")}${o.version} - ${d.dim(`could not verify: ${c instanceof Error?c.message:c}`)}`),{checked:!1,failure:null}}}));for(let o of r)o.checked&&n++,o.failure&&s.push(o.failure);return console.log(),{passed:s.length===0,checked:n,failures:s}}function lu(e){if(e.checked===0){console.log(d.dim(`No SHA references to verify
`));return}if(e.passed)console.log(d.success(`All SHA checks passed (${e.checked} verified)
`));else{console.log(d.error(d.bold(`SHA VALIDATION FAILED
`)));for(let t of e.failures)console.log(`  ${d.bold(t.action)}${d.dim("@")}${t.version}`),console.log(`    ${d.dim("Lockfile:")} ${t.lockfileSha}`),console.log(`    ${d.dim("Current:")}  ${d.error(t.remoteSha)}`),console.log(`    ${d.warning(`WARNING: Tag ${t.version} has been moved!`)}`);console.log()}}async function cu(e,t){let s=Vi();if(!s){console.log(d.dim("Not running in PR context, skipping comment"));return}try{await Ki(e,s,t),console.log(d.success(`Posted lockfile mismatch comment on PR #${s}`))}catch(n){console.error(d.error("Failed to post PR comment:"),n instanceof Error?n.message:n)}}import{dirname as Yi,isAbsolute as fu,join as pu}from"node:path";async function Ji(e){let t=await Ge(e.workflows),s=e.output;if(!fu(s)){let u=Yi(Yi(t));s=pu(u,s)}let n=await ss(s),i=new Set;for(let u of Object.values(n.actions))for(let a of u)for(let l of a.dependencies){let c=se(l.ref);c&&i.add(`${ne(c)}@${c.ref}`)}let r=new Date(n.generated);console.log(`${d.bold("actions.lock.json")} ${d.dim(`(generated ${r.toISOString().replace("T"," ").slice(0,19)})`)}`),console.log();let o=[];for(let[u,a]of Object.entries(n.actions))for(let l of a){let c=`${u}@${l.version}`;i.has(c)||o.push({name:u,action:l})}for(let u=0;u<o.length;u++){let{name:a,action:l}=o[u],c=u===o.length-1;Qi(a,l,n,"",c)}}function Qi(e,t,s,n,i){let r=i?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",o=i?"    ":"\u2502   ",u=t.sha.slice(0,12);console.log(`${n}${r}${d.bold(e)}${d.dim("@")}${d.info(t.version)} ${d.dim(`(${u})`)}`);for(let a=0;a<t.dependencies.length;a++){let l=t.dependencies[a],c=se(l.ref);if(!c)continue;let f=ne(c),p=s.actions[f]?.find(g=>g.version===c.ref);if(!p)continue;let m=a===t.dependencies.length-1;Qi(f,p,s,n+o,m)}}var zi={name:"gh-actions-lockfile",version:"1.2.0",license:"AGPL-3.0-or-later",description:"Generate and verify lockfiles for GitHub Actions dependencies",author:"Garen Torikian",workspaces:["website"],engines:{node:">=24.4.0"},repository:{type:"git",url:"git+https://github.com/gjtorikian/gh-actions-lockfile.git"},homepage:"https://gh-actions-lockfile.net",bugs:{url:"https://github.com/gjtorikian/gh-actions-lockfile/issues"},keywords:["github-actions","lockfile","security","dependency-management","ci-cd","supply-chain-security","pinning"],files:["dist"],type:"module",types:"./dist/types/index.d.ts",exports:{".":{types:"./dist/types/index.d.ts",import:"./dist/cli.js"}},bin:{"gh-actions-lockfile":"./dist/cli.js"},scripts:{start:"tsx src/index.ts",build:"ncc build src/action.ts -o dist -t -m && esbuild src/index.ts --bundle --platform=node --target=node24 --alias:yaml=./node_modules/yaml/browser/index.js --outfile=dist/cli.js --format=esm --minify --banner:js='#!/usr/bin/env node' && tsc --emitDeclarationOnly",typecheck:"tsc --noEmit",test:"NO_COLOR=1 npm run build && NO_COLOR=1 vitest run",lint:"oxlint --ignore-pattern 'dist/**'","lint:fix":"oxlint --fix --ignore-pattern 'dist/**'",package:"npm run build && npm pack","docs:dev":"npm run --workspace=gh-actions-lockfile-website dev","docs:build":"npm run --workspace=gh-actions-lockfile-website build","docs:preview":"npm run --workspace=gh-actions-lockfile-website preview"},dependencies:{"@actions/core":"^2.0.1",cleye:"^2.1.1","p-limit":"^7.2.0",picocolors:"^1.1.1",yaml:"^2.6.1"},devDependencies:{"@types/node":"^22.0.0","@vercel/ncc":"^0.38.4",esbuild:"^0.24.0",oxlint:"^1.33.0",tsx:"^4.19.0",typescript:"^5.7.2",vitest:"^3.0.0"}};var Qs={workflows:{type:String,alias:"w",description:"Path to workflows directory",default:".github/workflows"},output:{type:String,alias:"o",description:"Path to lockfile",default:Ii}},mu=He({name:"generate",help:{description:"Generate or update the lockfile"},flags:{...Qs,token:{type:String,alias:"t",description:"GitHub token (or use GITHUB_TOKEN env var)"},requireSha:{type:Boolean,description:"Require all action refs to be full SHAs (40 hex chars)",default:!1}}},async e=>{try{await Mi(e.flags)}catch(t){console.error(d.error("Error:"),t instanceof Error?t.message:t),process.exit(2)}}),du=He({name:"verify",help:{description:"Verify workflows match the lockfile"},flags:{...Qs,comment:{type:Boolean,alias:"c",description:"Post PR comment on verification failure",default:!0},skipSha:{type:Boolean,description:"Skip SHA resolution verification",default:!1},skipIntegrity:{type:Boolean,description:"Skip integrity hash verification",default:!1},skipAdvisories:{type:Boolean,description:"Skip security advisory checking",default:!1},token:{type:String,alias:"t",description:"GitHub token (or use GITHUB_TOKEN env var)"}}},async e=>{try{await Hi(e.flags)}catch(t){console.error(d.error("Error:"),t instanceof Error?t.message:t),process.exit(2)}}),Du=He({name:"list",help:{description:"Display the dependency tree of all locked actions"},flags:{...Qs}},async e=>{try{await Ji(e.flags)}catch(t){console.error(d.error("Error:"),t instanceof Error?t.message:t),process.exit(2)}}),Js=ds({name:"gh-actions-lockfile",version:zi.version,commands:[mu,du,Du]});if(!Js.command&&Js._.length>0){let e=Js._[0];console.error(d.error(`Error: Unknown command '${e}'`)),console.error("Run 'gh-actions-lockfile --help' for available commands."),process.exit(1)}
